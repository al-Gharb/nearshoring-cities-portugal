<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Data-driven analysis of Portugal's best cities for IT nearshoring — talent pipelines, costs, digital infrastructure, and AI-powered simulator.">
  <meta name="robots" content="index, follow">

  <!-- Open Graph -->
  <meta property="og:title" content="IT Nearshoring in Portugal — City Analysis & AI Simulator">
  <meta property="og:description" content="Compare 20 Portuguese cities for IT nearshoring: graduate output, salary costs, office rent, and digital infrastructure.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://al-gharb.github.io/nearshoring-cities-portugal/">

  <!-- Canonical -->
  <link rel="canonical" href="https://al-gharb.github.io/nearshoring-cities-portugal/">

  <!-- Fonts — async load to avoid render-blocking -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"></noscript>

  <!-- Font Awesome -->
  <!-- Bundled locally via Vite (see src/styles/base.css import) -->

  <!-- Preload databases -->
  <link rel="preload" href="data/normalized/MASTER.json" as="fetch" type="application/json" crossorigin>
  <link rel="preload" href="data/normalized/CITY_PROFILES.json" as="fetch" type="application/json" crossorigin>

  <title>IT Nearshoring in Portugal — City Analysis & AI Simulator</title>

  <!-- App CSS (Vite handles bundling) -->
  <link rel="stylesheet" href="./styles/base.css">
</head>
<body>

  <!-- Skip Navigation -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
       ║  COVER PAGE                                                              ║
       ╚═══════════════════════════════════════════════════════════════════════════╝ -->
  <section class="cover-page" id="cover">
    <div class="cover-content">
      <h1 class="cover-title">
        Nearshoring Guide Portugal 2026<span class="cover-cursor"></span>
      </h1>
      <p class="cover-subtitle">
        A practical look at Portugal's best cities for technology nearshoring
      </p>
    </div>

    <!-- Theme Toggle (top-right) -->
    <div class="theme-toggle">
      <span class="theme-label" aria-hidden="true">☀️</span>
      <label class="theme-switch" for="themeToggle">
        <input type="checkbox" id="themeToggle" aria-label="Toggle dark mode">
        <span class="theme-slider"></span>
      </label>
      <span class="theme-label" aria-hidden="true">🌙</span>
    </div>

    <!-- Portugal Map (SVG inline — real NUTS II polygon paths) -->
    <div class="map-container" role="img" aria-label="Interactive map of Portugal showing featured and secondary tech cities">
      <div class="map-wrapper">
        <div class="portugal-map" id="portugal-map">
          <svg viewBox="0 0 552 842" xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision">
            <defs>
              <linearGradient id="mapGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95" />
                <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:0.9" />
              </linearGradient>
              <linearGradient id="mapHoverGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#bfdbfe;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#93c5fd;stop-opacity:0.95" />
              </linearGradient>
              <filter id="mapShadow" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="2" dy="4" stdDeviation="3" flood-opacity="0.2"/>
              </filter>
              <filter id="hoverGlow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="3" result="glow"/>
                <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <g transform="translate(0,842) scale(0.1,-0.1)" fill="url(#mapGradient)" stroke="none" shape-rendering="geometricPrecision">
              <!-- Norte Region -->
              <path class="map-region" data-region="Norte" d="M2170 8228 c-26 -14 -51 -35 -58 -51 -14 -28 -15 -28 -65 -20 -29 4 -97 8 -152 8 -91 0 -106 -3 -165 -32 -36 -17 -87 -34 -113 -38 -35 -5 -52 -14 -64 -31 -9 -14 -29 -26 -49 -30 -20 -4 -54 -24 -82 -49 -26 -23 -63 -50 -82 -60 -58 -29 -100 -65 -100 -85 0 -11 -9 -47 -21 -80 l-21 -60 55 -102 c50 -94 75 -165 97 -274 5 -22 14 -52 21 -66 9 -21 9 -30 -4 -48 -18 -26 -13 -46 32 -140 17 -36 31 -78 31 -94 0 -43 48 -176 75 -208 15 -18 31 -63 46 -125 22 -96 49 -165 69 -178 6 -4 20 -26 31 -50 15 -32 32 -49 67 -67 l47 -24 3 -70 c2 -38 7 -73 11 -77 16 -16 130 -9 160 9 25 15 36 16 69 6 53 -16 152 -16 153 1 1 6 2 30 3 52 l1 40 95 5 95 5 3 62 c3 57 6 64 42 97 51 46 77 52 162 36 l69 -13 37 36 c28 28 49 38 84 43 44 6 48 5 81 -31 31 -34 39 -37 103 -43 110 -8 178 -60 189 -143 8 -56 -5 -53 152 -38 112 10 114 10 172 -16 33 -15 64 -24 70 -20 6 3 11 33 11 66 0 58 1 59 28 59 42 0 102 20 102 34 0 7 -13 25 -30 41 -59 56 -28 80 125 95 61 6 130 14 155 16 57 7 79 -9 87 -61 9 -58 18 -66 57 -50 17 7 60 17 95 21 61 7 91 23 91 49 0 21 26 26 168 32 l133 6 36 44 c34 41 35 45 22 70 -13 25 -12 27 32 67 26 22 53 53 60 68 19 37 115 98 154 98 74 0 236 62 277 107 19 19 65 72 86 97 7 9 24 16 38 16 30 0 64 17 64 31 0 6 7 17 15 25 8 9 15 23 15 33 0 16 83 122 101 129 5 2 9 28 9 57 0 47 -4 56 -30 79 -49 41 -101 50 -272 51 -143 0 -159 2 -185 21 -15 12 -29 32 -31 46 -2 14 -12 34 -23 44 -24 22 -24 46 1 69 11 10 20 27 20 38 0 10 9 32 20 47 24 33 20 49 -19 71 -18 10 -30 28 -34 48 -6 31 -7 31 -69 31 -107 1 -207 16 -228 35 -16 14 -25 15 -50 7 -17 -6 -122 -14 -235 -18 l-205 -7 -39 27 c-28 20 -49 26 -73 24 -33 -3 -33 -3 -36 -61 -2 -47 -7 -60 -26 -72 -34 -22 -163 -65 -231 -76 -33 -6 -80 -19 -104 -30 -66 -29 -97 -26 -110 12 -12 36 -12 36 -146 0 -98 -26 -132 -21 -147 21 -13 36 -58 58 -122 58 -70 0 -199 -21 -223 -36 -15 -9 -54 -14 -118 -14 -91 0 -99 -2 -140 -30 -54 -37 -122 -53 -194 -45 -74 8 -111 23 -111 45 0 9 -13 36 -30 58 -44 61 -40 89 24 164 33 39 70 71 95 83 23 10 40 23 38 29 -2 6 -29 12 -61 14 -61 3 -66 8 -80 75 -8 35 -43 36 -106 5z"/>
              <!-- Centro Region -->
              <path class="map-region" data-region="Centro" d="M4311 6496 c-32 -33 -75 -53 -157 -70 -52 -11 -73 -20 -87 -40 -26 -36 -93 -37 -127 -1 -19 20 -21 27 -10 40 10 12 9 20 -4 40 -15 23 -23 25 -91 25 -79 0 -105 -13 -105 -51 0 -31 -15 -54 -101 -147 -104 -113 -117 -120 -172 -91 -72 37 -95 40 -137 19 -36 -19 -39 -19 -86 -1 -27 10 -71 22 -97 25 -60 9 -87 34 -87 81 0 44 -22 59 -114 80 -38 9 -86 25 -107 36 -49 24 -65 24 -136 -3 -47 -17 -76 -21 -150 -20 l-93 2 0 -69 c0 -106 -7 -118 -77 -125 -111 -12 -126 -18 -150 -61 -12 -22 -33 -43 -45 -47 -13 -3 -92 -6 -176 -7 -111 -1 -162 -5 -188 -16 -20 -8 -47 -12 -60 -9 -36 9 -74 66 -74 111 0 41 -55 133 -97 160 -21 14 -22 13 -28 -14 -3 -15 -10 -35 -16 -43 -5 -8 -14 -26 -20 -40 -6 -14 -20 -44 -30 -68 -10 -23 -19 -55 -19 -70 0 -15 -8 -38 -17 -51 -16 -24 -16 -25 20 -55 34 -28 37 -35 37 -83 0 -36 -9 -72 -27 -113 l-28 -60 -47 0 c-26 0 -50 -5 -55 -12 -8 -13 -47 -122 -88 -243 -12 -38 -37 -100 -54 -136 -16 -37 -35 -88 -42 -114 -11 -42 -10 -50 10 -86 22 -38 22 -41 6 -100 -14 -59 -116 -264 -212 -431 -24 -42 -45 -89 -46 -105 -2 -27 0 -28 57 -34 32 -4 61 -11 65 -16 3 -5 13 -12 22 -15 24 -9 42 -120 26 -164 -6 -17 -1 -23 25 -35 28 -12 34 -20 36 -51 2 -20 -4 -50 -12 -67 -9 -16 -16 -32 -16 -36 0 -3 45 -5 99 -5 l100 0 8 43 c8 38 12 42 41 45 l32 3 0 73 0 72 35 17 c38 18 44 40 20 71 -17 23 -21 131 -5 141 6 4 50 10 99 15 72 7 96 13 136 39 81 51 155 33 155 -38 0 -28 1 -29 71 -35 72 -8 99 1 99 30 0 18 42 28 86 21 37 -6 119 -44 134 -62 5 -5 12 -48 17 -95 8 -83 8 -84 38 -90 17 -4 39 -11 50 -17 11 -6 40 -13 65 -17 l46 -7 11 63 c6 35 18 80 27 101 l16 37 105 0 105 0 0 -65 c0 -61 1 -65 23 -65 40 0 125 -47 170 -94 24 -25 50 -46 57 -46 7 0 37 25 67 55 53 54 55 55 112 55 31 0 91 9 132 20 66 17 95 19 262 13 139 -5 201 -3 242 7 44 11 76 11 160 2 88 -10 108 -9 132 3 16 9 56 15 94 15 l67 0 16 41 c9 23 21 72 25 110 10 77 15 89 40 89 31 0 81 68 81 110 0 11 9 38 20 60 11 22 20 58 20 81 0 39 -6 48 -62 105 -45 44 -75 65 -105 73 -37 10 -44 17 -54 50 -8 26 -9 55 -3 87 9 46 12 50 72 85 34 20 80 39 101 42 28 3 60 21 110 62 39 32 71 64 71 72 0 8 -14 28 -31 44 -30 28 -31 32 -27 94 2 41 10 70 21 83 22 24 21 38 -3 69 -24 31 -26 80 -5 130 8 19 15 59 15 88 0 35 -5 57 -15 65 -8 7 -15 22 -15 33 0 11 -10 32 -22 45 l-23 24 23 15 c13 9 22 26 22 40 0 13 5 33 11 44 8 16 5 26 -16 51 -14 17 -32 44 -39 62 -8 17 -40 57 -73 89 l-59 57 -23 -24z"/>
              <!-- Oeste and Vale do Tejo Region -->
              <path class="map-region" data-region="Oeste and Vale do Tejo" d="M1714 4573 c-30 -16 -74 -29 -117 -33 -82 -9 -97 -20 -73 -52 9 -13 23 -33 32 -45 23 -33 10 -69 -36 -99 -47 -32 -60 -66 -35 -94 26 -28 12 -63 -48 -126 -49 -49 -57 -54 -98 -54 -24 0 -72 -7 -105 -15 -62 -14 -121 -8 -151 17 -18 14 -16 53 3 90 15 30 15 31 -15 58 -32 30 -37 43 -45 129 -3 30 -10 59 -15 64 -5 5 -35 11 -67 14 l-59 5 -33 -64 c-18 -34 -32 -76 -32 -93 0 -50 -84 -157 -145 -184 -22 -10 -67 -41 -100 -69 -33 -29 -94 -71 -135 -94 l-75 -42 3 -128 4 -127 -51 -76 c-53 -79 -63 -115 -34 -115 9 0 35 -11 58 -25 29 -16 70 -28 131 -35 97 -12 114 -21 114 -56 0 -51 66 -68 190 -49 59 9 66 17 44 54 -10 17 -14 34 -10 38 4 4 93 9 197 11 l189 4 0 -57 c0 -53 -2 -58 -45 -99 -25 -25 -45 -48 -45 -54 0 -5 -16 -29 -35 -53 -38 -48 -43 -75 -20 -118 20 -40 32 -43 238 -67 l47 -6 0 32 c0 52 22 82 83 116 26 14 30 14 46 0 15 -14 22 -14 68 1 64 20 83 9 83 -49 0 -52 19 -58 84 -25 51 25 105 42 185 56 39 7 54 18 64 45 2 5 40 9 84 9 66 -1 93 -6 142 -28 62 -28 95 -28 89 2 -2 11 -22 21 -58 31 -85 21 -98 41 -60 89 11 14 20 40 20 57 0 32 -32 95 -56 109 -8 4 -14 14 -14 22 0 8 -18 27 -40 41 -23 15 -40 35 -40 45 0 34 67 94 160 145 89 47 140 91 140 119 0 24 51 54 103 61 41 6 57 14 77 38 58 70 89 96 113 96 39 0 42 17 8 56 -26 29 -31 43 -31 83 0 58 40 128 78 138 14 3 59 -2 101 -11 103 -22 111 -21 111 8 0 49 -94 126 -153 126 -34 0 -66 35 -73 80 -6 39 -7 40 -50 40 -58 0 -84 -32 -84 -105 0 -37 -5 -57 -17 -66 -23 -19 -150 -15 -216 6 -28 10 -57 19 -64 21 -7 2 -15 20 -19 41 -6 34 -32 105 -53 143 -13 24 -64 23 -153 -4 -143 -44 -161 -40 -197 44 -12 27 -25 51 -29 54 -5 3 -31 -7 -58 -21z"/>
              <!-- Alentejo Region -->
              <path class="map-region" data-region="Alentejo" d="M3275 4314 c-42 -18 -71 -24 -95 -20 -30 5 -42 -1 -90 -38 -65 -51 -186 -125 -217 -132 -12 -3 -43 2 -68 11 -53 21 -123 15 -142 -11 -24 -33 -15 -60 33 -101 58 -48 54 -69 -17 -108 -28 -15 -81 -58 -117 -96 -54 -56 -75 -71 -106 -76 -30 -5 -56 -21 -103 -65 -37 -34 -91 -71 -130 -90 -68 -32 -113 -64 -113 -81 0 -23 115 -154 152 -173 36 -19 36 -45 -2 -67 -29 -17 -46 -53 -38 -78 2 -7 28 -18 58 -26 64 -16 80 -28 80 -59 0 -23 23 -54 41 -54 18 0 21 -50 5 -75 -13 -20 -25 -25 -57 -25 -47 0 -74 12 -109 49 -21 23 -40 29 -113 40 -106 16 -139 11 -242 -39 -126 -61 -123 -57 -96 -119 28 -66 20 -77 -58 -83 -43 -3 -66 -11 -88 -29 -17 -13 -44 -32 -61 -41 -31 -16 -35 -25 -47 -99 -4 -29 -12 -40 -36 -49 -55 -23 -79 -49 -79 -85 0 -24 7 -37 25 -49 54 -36 16 -63 -72 -52 -66 9 -105 8 -115 -2 -5 -5 6 -35 23 -68 30 -56 32 -65 36 -196 l5 -137 -71 -141 c-77 -154 -85 -186 -47 -196 13 -3 35 -17 48 -31 21 -23 23 -33 24 -146 0 -67 4 -143 8 -169 6 -33 3 -70 -9 -127 -15 -67 -16 -90 -6 -138 6 -31 11 -75 11 -97 0 -54 17 -76 84 -110 55 -28 57 -28 180 -21 114 6 126 5 165 -14 22 -12 61 -24 84 -27 38 -5 47 -3 66 17 11 12 21 26 21 30 0 26 177 39 253 18 20 -5 44 -20 52 -33 20 -30 124 -86 159 -86 15 0 38 -7 52 -16 18 -12 37 -15 74 -11 66 8 106 30 118 66 14 39 45 58 112 66 30 4 102 27 160 52 125 53 257 89 361 97 89 8 163 39 203 86 14 17 26 35 26 40 0 4 18 30 40 56 22 27 40 54 40 60 0 6 7 17 15 24 8 7 15 27 15 45 0 53 8 63 89 117 91 62 181 149 181 176 0 11 7 25 15 32 8 7 15 29 15 50 0 63 22 79 130 95 77 12 97 19 114 39 29 34 53 38 110 21 27 -8 55 -15 62 -15 22 0 44 31 44 63 0 18 9 43 20 57 22 28 25 52 10 81 -12 21 -40 25 -57 8 -7 -7 -38 -10 -82 -7 -61 3 -74 7 -101 33 -17 16 -36 47 -42 69 -14 46 -164 209 -260 283 -55 42 -58 47 -58 87 0 52 21 115 52 159 19 27 24 49 28 139 5 101 7 108 34 137 15 16 55 44 87 61 32 17 59 35 59 39 0 4 28 23 63 40 74 39 127 87 127 115 0 26 26 69 85 141 27 33 45 66 45 81 0 57 -100 109 -165 85 -25 -9 -44 -9 -72 -1 -57 15 -66 24 -72 72 -6 43 -6 43 -66 61 -88 26 -89 28 -96 92 -6 52 -11 62 -61 113 -92 95 -110 139 -67 162 16 9 19 19 17 48 -3 36 -5 38 -70 61 -42 14 -69 30 -73 41 -3 10 -31 30 -61 45 -58 28 -164 125 -164 149 0 13 -21 27 -38 26 -4 -1 -34 -12 -67 -26z"/>
              <!-- Lisbon Metropolitan Area -->
              <path class="map-region" data-region="Lisbon Metropolitan Area" d="M231 3362 c-15 -28 -14 -49 5 -82 16 -27 16 -30 -15 -96 -18 -38 -45 -90 -62 -115 -23 -36 -29 -57 -28 -95 2 -93 6 -98 84 -107 123 -15 207 -12 310 11 106 24 205 64 205 83 0 6 23 33 51 60 53 50 119 79 183 79 51 0 139 105 166 200 14 50 3 54 -110 41 -123 -15 -130 -17 -130 -45 0 -41 -22 -55 -121 -77 -93 -21 -97 -21 -130 -4 -19 10 -50 21 -69 24 -33 6 -35 9 -33 43 l2 36 -94 4 c-77 3 -100 8 -124 26 -45 33 -77 38 -90 14z"/>
              <!-- Península de Setúbal -->
              <path class="map-region" data-region="Península de Setúbal" d="M1410 2990 c-11 -11 -20 -30 -20 -43 0 -12 -7 -33 -16 -45 -17 -25 -73 -30 -134 -12 -19 6 -66 11 -105 11 -38 0 -87 4 -108 10 -50 13 -112 -14 -155 -68 -35 -44 -127 -91 -196 -101 -22 -3 -46 -11 -53 -18 -7 -7 -18 -14 -25 -16 -10 -4 -7 -22 10 -78 19 -56 23 -84 18 -124 l-7 -52 94 7 c62 5 110 14 140 28 25 12 52 21 60 21 23 0 88 30 137 62 l44 30 87 -42 c48 -24 94 -40 102 -37 9 3 17 20 19 38 3 32 4 32 58 34 30 1 70 9 87 18 31 17 39 31 45 87 4 33 139 135 191 144 28 5 37 11 37 26 0 33 -33 56 -98 69 -44 9 -63 17 -67 31 -12 39 -112 53 -145 20z"/>
              <!-- Algarve Region -->
              <path class="map-region" data-region="Algarve" d="M3322 930 c-26 -16 -50 -20 -119 -20 -73 0 -103 -6 -192 -36 -124 -42 -283 -112 -361 -160 -76 -46 -167 -68 -255 -61 -67 5 -153 34 -185 62 -8 7 -30 16 -48 20 -22 4 -36 15 -42 30 -14 36 -46 48 -113 42 -49 -4 -65 -11 -92 -37 l-32 -31 -104 5 c-57 2 -123 7 -147 11 -26 4 -61 2 -88 -5 -29 -8 -48 -9 -56 -3 -7 6 -44 13 -82 16 -38 4 -74 11 -80 17 -17 17 -53 11 -85 -16 -54 -45 -72 -81 -82 -155 -5 -40 -17 -82 -28 -97 -10 -15 -37 -63 -59 -107 -23 -44 -50 -93 -61 -110 -24 -35 -27 -61 -7 -68 7 -3 51 7 97 23 45 16 108 32 138 35 91 11 182 34 217 56 30 18 46 20 151 16 119 -4 175 -13 225 -37 20 -10 45 -11 96 -4 37 5 84 6 103 2 18 -4 97 -10 174 -13 189 -9 219 -16 376 -90 202 -95 256 -102 314 -39 21 23 48 38 90 49 78 22 250 110 274 141 10 13 25 24 33 24 8 0 52 11 98 25 45 14 111 28 146 31 73 8 77 14 44 85 -14 31 -20 66 -20 119 0 57 -8 100 -30 169 -44 136 -40 131 -113 131 -44 0 -71 -6 -95 -20z"/>
            </g>
          </svg>
        </div>

        <!-- Region Tooltip -->
        <div class="region-tooltip" id="regionTooltip" role="tooltip" aria-label="Region information">
          <div class="region-tooltip-header">
            <i class="fa-solid fa-map-location-dot"></i>
            <span id="regionTooltipText"></span>
          </div>
          <div class="region-tooltip-grads" id="regionTooltipGrads"></div>
        </div>

        <!-- City Markers Overlay -->
        <div class="markers-overlay">
          <!-- Featured Cities (10) — anchor links to profiles -->
          <a href="#braga" class="city-marker" style="top: 13%; left: 32%;">
            <span class="marker-dot"></span><span class="marker-label">Braga</span>
          </a>
          <a href="#guimaraes" class="city-marker" style="top: 18%; left: 40%;">
            <span class="marker-dot"></span><span class="marker-label">Guimarães</span>
          </a>
          <a href="#porto" class="city-marker" style="top: 22%; left: 26%;">
            <span class="marker-dot marker-large"></span><span class="marker-label">Porto</span>
          </a>
          <a href="#aveiro" class="city-marker" style="top: 28%; left: 24%;">
            <span class="marker-dot"></span><span class="marker-label">Aveiro</span>
          </a>
          <a href="#coimbra" class="city-marker" style="top: 37%; left: 38%;">
            <span class="marker-dot"></span><span class="marker-label">Coimbra</span>
          </a>
          <a href="#covilha" class="city-marker" style="top: 30%; left: 55%;">
            <span class="marker-dot"></span><span class="marker-label">Covilhã</span>
          </a>
          <a href="#lisbon" class="city-marker" style="top: 62%; left: 12%;">
            <span class="marker-dot marker-large marker-capital"></span><span class="marker-label">Lisbon</span>
          </a>
          <a href="#evora" class="city-marker" style="top: 65%; left: 48%;">
            <span class="marker-dot"></span><span class="marker-label">Évora</span>
          </a>
          <a href="#faro" class="city-marker" style="top: 96%; left: 48%;">
            <span class="marker-dot"></span><span class="marker-label">Faro</span>
          </a>
          <a href="#setubal" class="city-marker" style="top: 67%; left: 18%;">
            <span class="marker-dot"></span><span class="marker-label">Setúbal</span>
          </a>

          <!-- Secondary Cities (11) — tooltips only -->
          <div class="city-marker city-marker-secondary" style="top: 45%; left: 22%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Leiria</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Centro</div>
              <div class="tooltip-city">Leiria</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPL – Instituto Politécnico de Leiria</div>
              <div class="tooltip-detail"><i class="fa-solid fa-gear"></i> Plastics, molds &amp; engineering cluster</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 10%; left: 50%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">V. Real</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Norte</div>
              <div class="tooltip-city">Vila Real</div>
              <div class="tooltip-info"><i class="fa-solid fa-university"></i> UTAD – Universidade de Trás-os-Montes</div>
              <div class="tooltip-detail"><i class="fa-solid fa-leaf"></i> Agri-tech &amp; environmental sciences</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 5%; left: 22%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Viana</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Norte</div>
              <div class="tooltip-city">Viana do Castelo</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPVC – Instituto Politécnico</div>
              <div class="tooltip-detail"><i class="fa-solid fa-ship"></i> Shipbuilding &amp; renewable energy</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 5%; left: 68%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Bragança</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Norte</div>
              <div class="tooltip-city">Bragança</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPB – Instituto Politécnico</div>
              <div class="tooltip-detail"><i class="fa-solid fa-coins"></i> Lowest operating costs in Portugal</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 24%; left: 48%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Viseu</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Centro</div>
              <div class="tooltip-city">Viseu</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPV – Instituto Politécnico de Viseu</div>
              <div class="tooltip-detail"><i class="fa-solid fa-mountain-city"></i> Interior hub, high quality of life</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 40%; left: 58%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">C. Branco</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Centro</div>
              <div class="tooltip-city">Castelo Branco</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPCB – Instituto Politécnico</div>
              <div class="tooltip-detail"><i class="fa-solid fa-road"></i> Spain border, cross-border logistics</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 50%; left: 38%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Tomar</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Oeste and Vale do Tejo</div>
              <div class="tooltip-city">Tomar</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPT – Instituto Politécnico de Tomar</div>
              <div class="tooltip-detail"><i class="fa-solid fa-landmark"></i> UNESCO Templar heritage city</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 82%; left: 42%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Beja</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Alentejo</div>
              <div class="tooltip-city">Beja</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPBeja – Instituto Politécnico</div>
              <div class="tooltip-detail"><i class="fa-solid fa-solar-panel"></i> Solar energy &amp; agri-tech hub</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 55%; left: 62%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Portalegre</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Alentejo</div>
              <div class="tooltip-city">Portalegre</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPP – Instituto Politécnico</div>
              <div class="tooltip-detail"><i class="fa-solid fa-tree"></i> Cork industry &amp; rural tech</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 53%; left: 28%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Santarém</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Oeste and Vale do Tejo</div>
              <div class="tooltip-city">Santarém</div>
              <div class="tooltip-info"><i class="fa-solid fa-building-columns"></i> IPS – Instituto Politécnico</div>
              <div class="tooltip-detail"><i class="fa-solid fa-wheat-awn"></i> Agricultural sciences center</div>
              <div class="tooltip-note">Not covered in this analysis</div>
            </div>
          </div>
          <div class="city-marker city-marker-secondary" style="top: 78%; left: 14%;">
            <span class="marker-dot-secondary"></span><span class="marker-label-secondary">Sines</span>
            <div class="secondary-tooltip">
              <div class="tooltip-region"><i class="fa-solid fa-map-location-dot"></i> Alentejo</div>
              <div class="tooltip-city">Sines</div>
              <div class="tooltip-info"><i class="fa-solid fa-anchor"></i> Deep-water port (no local university)</div>
              <div class="tooltip-detail"><i class="fa-solid fa-server"></i> Data center &amp; green hydrogen hub</div>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Simulator CTA Button (overlay at right edge of map) -->
      <div class="ai-simulator-column">
        <a href="#ai-simulator" class="ai-simulator-cta ai-simulator-cta-center">
          <span class="ai-cta-badge">Experimental v3</span>
          <span class="ai-cta-icon"><i class="fa-solid fa-robot"></i></span>
          <span class="ai-cta-text">
            <span class="ai-cta-title">AI Nearshoring Simulator <i>Portugal</i></span>
          </span>
          <span class="ai-cta-arrow"><i class="fa-solid fa-chevron-down"></i></span>
        </a>
      </div>

      <!-- City List Side Panel -->
      <div class="city-list-panel">
        <h2><i class="fa-solid fa-compass" aria-hidden="true"></i> Explore 10 Cities of Interest</h2>
        <ul class="city-list">
          <!-- Dynamically rendered by coverCityList.js from CITY_PROFILES.json -->
        </ul>
      </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator" aria-hidden="true">
      <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="white" stroke-width="2">
        <path d="M7 13l5 5 5-5M7 6l5 5 5-5"/>
      </svg>
    </div>
  </section>

  <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
       ║  HEADER                                                                  ║
       ╚═══════════════════════════════════════════════════════════════════════════╝ -->
  <header class="main-header">
    <div class="container">
      <h3 class="header-verification">work in progress.... v0.9</h3>
      <p class="header-verification">
         Expect curated insights, directional data, carefully derived estimates, and user-friendly presented information, designed to help you ask the right questions when navigating Portugal as a nearshoring destination - built for operators, not scientists.  
      </p>

      <p class="header-meta header-meta-row">
        <span class="header-meta-item">
          <i class="fa-regular fa-clock" aria-hidden="true"></i>
          <strong>Read Time:</strong> <span aria-label="approximately 30 minutes">~30 min</span>
        </span>
        <span class="header-meta-sep">|</span>
        <span class="header-meta-item">
          <a href="https://chat.openai.com/?q=Summarize%20the%20content%20on%20the%20following%20webpage%20into%203%E2%80%935%20concise%20bullet%20points%20%28each%20bullet%20%C3%A0%C2%89%2020%20words%29%2C%20focused%20on%20key%20insights%20about%20nearshoring%20cities%20in%20Portugal%2C%20for%20a%20first-time%20visitor%3A%20https%3A%2F%2Fal-gharb.github.io%2Fnearshoring-cities-portugal%2F"
             target="_blank" rel="noopener" class="header-chatgpt-inline">
            <img src="assets/chatgpt-logo.svg" alt="ChatGPT"> Summarize with ChatGPT
          </a>
        </span>
        <span class="header-meta-sep">|</span>
        <span class="header-meta-item">
          <i class="fa-regular fa-calendar-check" aria-hidden="true"></i>
          <strong>Last Update:</strong> <span aria-label="Last updated February 11, 2026">Feb. 17, 2026</span>
        </span>
        <span class="header-meta-sep">|</span>
        <span class="header-meta-item">
          <a href="https://github.com/al-gharb/nearshoring-cities-portugal" target="_blank" rel="noopener noreferrer" class="header-author-link">
            <i class="fa-brands fa-github" aria-hidden="true"></i> al-Gharb
            (human-in-the-loop )
          </a>
        </span>
      </p>

      <details class="header-credits-toggle">
        <summary><i class="fa-solid fa-circle-info"></i> Publication Info</summary>
              <p class="header-credits-inline"><strong>Built and written with AI.</strong> All data has been semi-automatically verified through AI fact-checks, cross-referenced with official sources, and scored for confidence under human supervision and cross checking. Data is meant to be directional. Do not rely on it and double check everything!</p>

        <p class="header-credits-inline">
         Shoutout to <strong>Claude Opus</strong> for building this beautiful beast of a site, and to <strong>GPT-5</strong>, <strong>Perplexity</strong>, <strong>Gemini Deep Research</strong>, and <strong>Claude Sonnet</strong> for running the research and fact-checking department.
        </p>
      </details>
    </div>
  </header>

  <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
       ║  MAIN CONTENT                                                            ║
       ╚═══════════════════════════════════════════════════════════════════════════╝ -->
  <main class="container" id="main-content">

    <h2 class="visually-hidden">Analysis sections</h2>

    <!-- TABLE OF CONTENTS -->
    <details class="deeper-dive-container" open>
      <summary class="deeper-dive-summary">
        <i class="fa-solid fa-list" aria-hidden="true"></i>
        <span class="deeper-dive-title">Table of Contents</span>
        <span class="deeper-dive-subtitle">— Navigate the full analysis</span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">
        <section id="index" class="intro-block" aria-labelledby="toc-heading">
          <nav class="toc-nav" aria-label="Document navigation">

            <!-- 1. Portugal Macro & Basic Stats -->
            <div class="toc-row toc-row-main toc-section-macro">
              <a href="#executive-summary" class="toc-link-main"><span class="toc-number">1</span><i class="fa-solid fa-chart-line toc-icon-accent" aria-hidden="true"></i>Portugal: Macroeconomic Scorecard &amp; EU Comparison</a>
              <span class="toc-confidence" data-toc-section="macroeconomic"></span>
            </div>

            <!-- 2. Digital Infrastructure & Connectivity -->
            <div class="toc-row toc-row-main toc-section-infra">
              <a href="#digital-infrastructure" class="toc-link-main"><span class="toc-number">2</span><i class="fa-solid fa-tower-broadcast toc-icon-accent" aria-hidden="true"></i>Digital Infrastructure &amp; Connectivity</a>
              <span class="toc-confidence" data-toc-section="digitalInfra"></span>
            </div>

            <!-- 3. Strategic Considerations -->
            <div class="toc-row toc-row-main toc-section-strategic">
              <a href="#operational-considerations" class="toc-link-main"><span class="toc-number">3</span><i class="fa-solid fa-gears toc-icon-accent" aria-hidden="true"></i>Strategic Considerations</a>
              <span class="toc-confidence" data-toc-section="strategic"></span>
            </div>
            <div class="toc-row toc-row-sub toc-section-strategic-sub">
              <a href="#tax-incentives" class="toc-link-sub"><i class="fa-solid fa-coins toc-icon-sub" aria-hidden="true"></i>Tax Incentives</a>
              <span class="toc-separator">·</span>
              <a href="#labor-market" class="toc-link-sub"><i class="fa-solid fa-scale-balanced toc-icon-sub" aria-hidden="true"></i>Labor Market</a>
              <span class="toc-separator">·</span>
              <a href="#healthcare-safety" class="toc-link-sub"><i class="fa-solid fa-heart-pulse toc-icon-sub" aria-hidden="true"></i>Quality of Life &amp; Security</a>
              <span class="toc-separator">·</span>
              <a href="#cost-of-living" class="toc-link-sub"><i class="fa-solid fa-cart-shopping toc-icon-sub" aria-hidden="true"></i>Cost of Living</a>
            </div>

            <!-- 4. University Talent Output & Flow -->
            <div class="toc-row toc-row-main toc-section-talent">
              <a href="#university-talent-flow" class="toc-link-main"><span class="toc-number">4</span><i class="fa-solid fa-graduation-cap toc-icon-accent" aria-hidden="true"></i>University Talent Output &amp; Flow</a>
              <span class="toc-confidence" data-toc-section="universityTalent"></span>
            </div>
            <div class="toc-row toc-row-sub toc-section-talent-sub">
              <a href="#value-matrix" class="toc-link-sub"><i class="fa-solid fa-crosshairs toc-icon-sub" aria-hidden="true"></i>Talent vs Cost Matrix</a>
              <span class="toc-separator">·</span>
              <a href="#regional-talent-flows" class="toc-link-sub"><i class="fa-solid fa-diagram-project toc-icon-sub" aria-hidden="true"></i>Regional Talent Flows</a>
            </div>

            <!-- 5. Workforce Talent Pools -->
            <div class="toc-row toc-row-main toc-section-workforce">
              <a href="#workforce-talent-pools" class="toc-link-main"><span class="toc-number">5</span><i class="fa-solid fa-users toc-icon-accent" aria-hidden="true"></i>Workforce Talent Pools</a>
              <span class="toc-confidence" data-toc-section="workforce"></span>
            </div>

            <!-- 6. City Profiles -->
            <div class="toc-row toc-row-main toc-section-cities">
              <a href="#city-profiles" class="toc-link-main"><span class="toc-number">6</span><i class="fa-solid fa-city toc-icon-accent" aria-hidden="true"></i>City Profiles</a>
              <span class="toc-confidence" data-toc-section="cityProfiles"></span>
            </div>
            <div class="toc-row toc-row-sub toc-cities toc-section-cities-sub">
              <a href="#lisbon" class="toc-link-city"><i class="fa-solid fa-landmark" aria-hidden="true"></i>Lisbon</a>
              <a href="#porto" class="toc-link-city"><i class="fa-solid fa-industry" aria-hidden="true"></i>Porto</a>
              <a href="#braga" class="toc-link-city"><i class="fa-solid fa-shield-halved" aria-hidden="true"></i>Braga</a>
              <a href="#guimaraes" class="toc-link-city"><i class="fa-solid fa-gears" aria-hidden="true"></i>Guimarães</a>
              <a href="#coimbra" class="toc-link-city"><i class="fa-solid fa-graduation-cap" aria-hidden="true"></i>Coimbra</a>
              <a href="#aveiro" class="toc-link-city"><i class="fa-solid fa-tower-broadcast" aria-hidden="true"></i>Aveiro</a>
              <a href="#covilha" class="toc-link-city"><i class="fa-solid fa-mountain" aria-hidden="true"></i>Covilhã</a>
              <a href="#evora" class="toc-link-city"><i class="fa-solid fa-leaf" aria-hidden="true"></i>Évora</a>
              <a href="#faro" class="toc-link-city"><i class="fa-solid fa-umbrella-beach" aria-hidden="true"></i>Faro</a>
              <a href="#setubal" class="toc-link-city"><i class="fa-solid fa-anchor" aria-hidden="true"></i>Setúbal</a>
            </div>

            <!-- 7. AI Nearshoring Simulator -->
            <div class="toc-row toc-row-main toc-row-highlight toc-section-simulator">
              <a href="#ai-simulator" class="toc-link-main toc-link-simulator"><span class="toc-number">7</span><i class="fa-solid fa-wand-magic-sparkles toc-icon-accent" aria-hidden="true"></i>AI Nearshoring Simulator Portugal<span class="toc-badge-new">✨ Try it!</span></a>
            </div>

            <!-- City Database + Sources (Foundation - No Number, single row) -->
            <div class="toc-row toc-row-main toc-section-foundation">
              <a href="#city-database" class="toc-link-main"><i class="fa-solid fa-database toc-icon-accent" aria-hidden="true"></i>City Database</a>
              <span class="toc-confidence" data-toc-section="cityDatabase"></span>
              <a href="#sources-methodology" class="toc-link-main toc-link-sources"><i class="fa-solid fa-book-open toc-icon-accent" aria-hidden="true"></i>Sources &amp; Methodologies</a>
            </div>

            <!-- 8. Publication Notes -->
            <div class="toc-row toc-row-main toc-section-notes">
              <a href="#publication-notes" class="toc-link-main"><span class="toc-number">8</span><i class="fa-solid fa-scale-balanced toc-icon-accent" aria-hidden="true"></i>Publication Notes</a>
            </div>

            <!-- 9. Semi-Automated AI Fact-Checks -->
            <div class="toc-row toc-row-main toc-section-factcheck">
              <a href="#verification-archive" class="toc-link-main"><span class="toc-number">9</span><i class="fa-solid fa-robot toc-icon-accent" aria-hidden="true"></i>Semi-Automated AI Fact-Checks</a>
            </div>

          </nav>
        </section>
      </div>
    </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  CITY DATABASE TABLE                                                    ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-foundation" id="city-database">
      <summary class="deeper-dive-summary">
        <i class="fa-solid fa-database section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">City Database</span>
        <span class="deeper-dive-subtitle">— 20 cities compared: talent pipeline, costs, and infrastructure</span>
        <span class="section-confidence" data-section="cityDatabase"></span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">
        <p class="section-intro">All 20 cities ranked by talent output, costs, and infrastructure. See sources & methodologies.</p>

        <div class="table-wrapper">
          <table class="city-table" data-db="master" aria-label="Portuguese cities nearshoring comparison">
            <thead>
              <tr>
                <th scope="col" title="City name — ★ = featured city with full profile below">City</th>
                <th scope="col" title="Higher education institutions (HEIs) located in or near this city">Universities</th>
                  <th scope="col" class="col-numeric col-stem-official" title="Official STEM graduates/year — DGEEC CNAEF codes 05+06+07. City values are ≈estimates proportionally derived from official DGEEC regional totals; subtotals (*) are the actual DGEEC figures."><i class="fa-solid fa-user-graduate" aria-hidden="true"></i> Official STEM</th>
                  <th scope="col" class="col-numeric col-ict" title="Core ICT graduates/year — DGEEC CNAEF codes 481 (CS) + 523 (Electronics). City values are ≈estimates proportionally derived from official DGEEC regional totals; subtotals (*) are the actual DGEEC figures."><i class="fa-solid fa-user-graduate" aria-hidden="true"></i> ICT/yr</th>
                  <th scope="col" class="col-numeric col-ict col-with-badge" title="Auto-calculated: (Core ICT ÷ Official STEM) × 100 — shows what share of STEM graduates specialize in ICT"><span class="th-content"><span class="th-text">ICT %</span><span class="badge-auto" title="Auto-calculated: (Core ICT ÷ Official STEM) × 100">auto</span></span></th>
                  <th scope="col" class="col-numeric col-stemplus col-with-badge" title="Tech STEM+ graduates/year — internal estimate shown as approximate (≈), not an official DGEEC classification"><span class="th-content"><span class="th-text"><i class="fa-solid fa-user-graduate" aria-hidden="true"></i><i class="fa-solid fa-user" aria-hidden="true"></i> STEM+/yr</span><span class="badge-auto" title="Internal estimate from MASTER.json (approximate)">auto</span></span></th>
                  <th scope="col" class="col-numeric col-with-badge" title="Salary Index (experimental proxy) — auto-calculated from INE Bachelor baseline by NUTS II, then adjusted with IT convergence + city COL"><span class="th-content"><span class="th-text">Salary Index</span><span class="badge-auto" title="Experimental proxy: [baseline + (100 − baseline) × 0.45] + (COL − 33) × 0.65, cap 100">auto</span></span></th>
                  <th scope="col" class="col-numeric" title="Office rent per m²/month — Source: Idealista live listings, semi-automated HITL+agent extraction. Scope: quality offices in central locations, 60–300 m².">Office €/m²</th>
                  <th scope="col" class="col-numeric" title="Residential rent per month — Source: Idealista live listings, semi-automated HITL+agent extraction. Scope: 1-bedroom modern apartments, central areas, 40–60 m².">Res. Rent €</th>
                  <th scope="col" class="col-numeric" title="Cost of Living + Rent Index — Source: Numbeo (NYC = 100). Where unavailable, Numbeo-style estimate derived from regional cost patterns, AI fact-checked.">COL + Rent Index</th>
                </tr>
              </thead>
              <tbody id="city-db-body">
                <!-- Dynamically rendered from MASTER.json by cityTable.js -->
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  SOURCES, METHODOLOGIES & INTERNAL CALCULATIONS                         ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-foundation" id="sources-methodology">
      <summary class="deeper-dive-summary">
        <i class="fa-solid fa-book-open section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">Sources, Methodologies &amp; Internal Calculations</span>
        <span class="deeper-dive-subtitle">— Verify data provenance and calculation methods</span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">
        <p class="section-intro">Every data point in this document links to its source below. Three categories: official government data, market research surveys, and internal calculations with documented methodology.</p>

        <!-- Official Data Sources -->
        <div class="source-category" id="sources-official">
          <h3><i class="fa-solid fa-building-columns" aria-hidden="true"></i> Official Data Sources</h3>

          <div class="source-entry" id="src-dgeec">
            <h4>DGEEC InfoCursos</h4>
            <p class="source-description">Portuguese government education statistics portal. Official source for all graduate output numbers.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Official STEM graduates, Core ICT graduates, CTeSP diplomas</li>
              <li><strong>Update frequency:</strong> Annual (academic year data)</li>
              <li><strong>Data year:</strong> 2023/24</li>
            </ul>
            <a href="https://estatisticas-educacao.dgeec.medu.pt/eef/2024/ensino_superior/alunos/diplomados.asp" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://estatisticas-educacao.dgeec.medu.pt/eef/2024/ensino_superior/alunos/diplomados.asp
            </a>
          </div>

          <div class="source-entry" id="src-ine">
            <h4>INE / MTSSS</h4>
            <p class="source-description">National Statistics Institute and Ministry of Labour. Regional salary baselines and labor market data (Personnel Tables / Quadros de Pessoal).</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Average monthly earnings by NUTS region and education level</li>
              <li><strong>Indicator:</strong> 0012653 — Average monthly earnings (€) by NUTS 2024 and Level of education</li>
              <li><strong>Update frequency:</strong> Annual</li>
              <li><strong>Data year:</strong> 2023</li>
              <li><strong>Note:</strong> Original INE data is in Portugal's 14× payment format. <strong>All salary values displayed in this document are already converted to 12× format</strong> for international comparison (14× source data × 14/12 ≈ ×1.167).</li>
            </ul>
            <a href="https://www.ine.pt/xportal/xmain?xpid=INE&xpgid=ine_indicadores&contecto=pi&indOcorrCod=0012653&selTab=tab0" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.ine.pt/xportal/xmain?xpid=INE&xpgid=ine_indicadores&contecto=pi&indOcorrCod=0012653&selTab=tab0
            </a>
          </div>

          <div class="source-entry" id="src-a3es">
            <h4>A3ES — Agency for Assessment and Accreditation</h4>
            <p class="source-description">Portuguese higher education quality assurance agency. Accreditation status for university programs.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Program accreditation, university count per city</li>
              <li><strong>Update frequency:</strong> Continuous (per accreditation cycle)</li>
            </ul>
            <a href="https://a3es.pt/pt/avaliacao-e-acreditacao/resultados-dos-processo-de-avaliacao-e-acreditacao/acreditacao-de-ciclos-de-estudos/" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://a3es.pt/pt/avaliacao-e-acreditacao/resultados-dos-processo-de-avaliacao-e-acreditacao/acreditacao-de-ciclos-de-estudos/
            </a>
          </div>

          <div class="source-entry" id="src-eu-monitor">
            <h4>EU Education and Training Monitor</h4>
            <p class="source-description">European Commission annual report on education systems. Portugal country report with tertiary attainment, STEM share, and skills forecasts.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Tertiary attainment rates, STEM graduate share, international student mobility</li>
              <li><strong>Update frequency:</strong> Annual</li>
              <li><strong>Data year:</strong> 2025 edition</li>
            </ul>
            <a href="https://op.europa.eu/webpub/eac/education-and-training-monitor/en/country-reports/portugal.html" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://op.europa.eu/webpub/eac/education-and-training-monitor/en/country-reports/portugal.html
            </a>
          </div>

          <div class="source-entry" id="src-cfp">
            <h4>CFP — Conselho das Finanças Públicas</h4>
            <p class="source-description">Portugal's independent fiscal council. Publishes economic and fiscal outlook reports with GDP, inflation, and public debt projections.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> GDP growth, net lending, HICP inflation, public debt-to-GDP</li>
              <li><strong>Update frequency:</strong> Biannual</li>
              <li><strong>Data year:</strong> 2025–2029 outlook</li>
            </ul>
            <a href="https://www.cfp.pt/en/publications/economic-and-fiscal-outlook/economic-and-fiscal-outlook-2025-2029-update" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.cfp.pt/en/publications/economic-and-fiscal-outlook/economic-and-fiscal-outlook-2025-2029-update
            </a>
          </div>

          <div class="source-entry" id="src-eurostat">
            <h4>Eurostat</h4>
            <p class="source-description">EU statistical office. Provides harmonized macroeconomic data, public debt ratios, and comparative EU metrics.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Public debt-to-GDP, employment rates, EU comparative data</li>
              <li><strong>Update frequency:</strong> Continuous</li>
            </ul>
            <a href="https://ec.europa.eu/eurostat" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://ec.europa.eu/eurostat
            </a>
          </div>

          <div class="source-entry" id="src-eurostat-countryfacts">
            <h4>Eurostat — Country Facts (EU, Germany, Portugal)</h4>
            <p class="source-description">Eurostat comparative dataset for selected indicators, used for the macroeconomic EU-vs-Germany-vs-Portugal table.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Population, minimum wage, poverty risk, inflation, unemployment, youth unemployment, GDP per capita, debt, deficit/surplus, renewables, electricity prices</li>
              <li><strong>Update frequency:</strong> Continuous (as indicators are refreshed by Eurostat)</li>
            </ul>
            <a href="https://ec.europa.eu/eurostat/cache/countryfacts/#?geo=EU,DE,PT" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://ec.europa.eu/eurostat/cache/countryfacts/#?geo=EU,DE,PT
            </a>
          </div>

          <div class="source-entry" id="src-eurostat-workforce">
            <h4>Eurostat — ICT Workforce Datasets</h4>
            <p class="source-description">Official EU datasets for ICT specialists in employment and related workforce indicators used in this analysis.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> ICT specialists as % of employment, workforce trend context</li>
              <li><strong>Primary table:</strong> isoc_sks_itspt</li>
              <li><strong>Update frequency:</strong> Annual</li>
            </ul>
            <a href="https://ec.europa.eu/eurostat/databrowser/view/isoc_sks_itspt/default/table?lang=en" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://ec.europa.eu/eurostat/databrowser/view/isoc_sks_itspt/default/table?lang=en
            </a>
          </div>

          <div class="source-entry" id="src-ecb">
            <h4>ECB — European Central Bank</h4>
            <p class="source-description">Central bank for the euro area. Sovereign yield data and monetary policy reference rates.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> 10Y sovereign bond yields, monetary policy rates</li>
              <li><strong>Update frequency:</strong> Daily (market data)</li>
            </ul>
            <a href="https://www.ecb.europa.eu/stats/policy_and_exchange_rates/key_ecb_interest_rates/html/index.en.html" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.ecb.europa.eu/stats/policy_and_exchange_rates/key_ecb_interest_rates/html/index.en.html
            </a>
          </div>

          <div class="source-entry" id="src-anacom">
            <h4>ANACOM — Autoridade Nacional de Comunicações</h4>
            <p class="source-description">Portuguese national communications authority. Official source for telecommunications infrastructure data including 5G, 4G coverage, and FTTH penetration.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> 4G/5G population coverage, FTTH penetration, operator licensing</li>
              <li><strong>Update frequency:</strong> Quarterly reports</li>
            </ul>
            <a href="https://www.anacom.pt/render.jsp?categoryId=520" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.anacom.pt/render.jsp?categoryId=520
            </a>
          </div>


          <div class="source-entry" id="src-efepi">
            <h4>EU Education and Training Monitor — Portugal</h4>
            <p class="source-description">European Commission country profile used for skills and education context relevant to workforce quality.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Education attainment and skills context</li>
              <li><strong>Update frequency:</strong> Annual</li>
              <li><strong>Data year:</strong> 2025 edition</li>
            </ul>
            <a href="https://op.europa.eu/webpub/eac/education-and-training-monitor/en/country-reports/portugal.html" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://op.europa.eu/webpub/eac/education-and-training-monitor/en/country-reports/portugal.html
            </a>
          </div>


          <div class="source-entry" id="src-porto-sines">
            <h4>Porto de Sines / APS</h4>
            <p class="source-description">Administração do Porto de Sines (Port of Sines Authority). Official port statistics including depth, capacity, and connectivity infrastructure.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Draft depth, container capacity, rail connectivity</li>
              <li><strong>Update frequency:</strong> Annual reports</li>
              <li><strong>Data year:</strong> 2024</li>
            </ul>
            <a href="https://www.apsinesalgarve.pt/porto-de-sines" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.apsinesalgarve.pt/porto-de-sines
            </a>
          </div>

          <div class="source-entry" id="src-ehci">
            <h4>EU State of Health — Country Profiles</h4>
            <p class="source-description">European Commission source for country-level healthcare system profile and performance context.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Country health profile and health-system indicators</li>
              <li><strong>Update frequency:</strong> Periodic</li>
            </ul>
            <a href="https://health.ec.europa.eu/state-health-eu/country-health-profiles_en" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://health.ec.europa.eu/state-health-eu/country-health-profiles_en
            </a>
          </div>

          <div class="source-entry" id="src-ani">
            <h4>ANI — Agência Nacional de Inovação</h4>
            <p class="source-description">Portuguese National Innovation Agency. Official source for SIFIDE II R&D tax credit program, rates, and application process.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> SIFIDE II rates (32.5% base + 50% incremental, up to €1.5M), eligible expenses</li>
              <li><strong>Update frequency:</strong> Annual applications</li>
            </ul>
            <a href="https://www.ani.pt/en/sifide-system-of-tax-incentives-for-business-rd/" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.ani.pt/en/sifide-system-of-tax-incentives-for-business-rd/
            </a>
          </div>

          <div class="source-entry" id="src-iapmei">
            <h4>IAPMEI — Tech Visa Program</h4>
            <p class="source-description">Institute for SME support. Manages the Tech Visa fast-track work and residence permit program for highly qualified non-EU tech professionals hired by certified companies.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Certification requirements, startup/innovation pathways</li>
              <li><strong>Update frequency:</strong> Ongoing</li>
              <li><strong>Managed by:</strong> IAPMEI + AIMA/SEF</li>
            </ul>
            <a href="https://www.iapmei.pt/Paginas/Tech-Visa-en.aspx" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.iapmei.pt/Paginas/Tech-Visa-en.aspx
            </a>
          </div>

        </div>

        <!-- Market Data & Other Sources -->
        <div class="source-category" id="sources-market">
          <h3><i class="fa-solid fa-chart-line" aria-hidden="true"></i> Market Data &amp; Other Sources</h3>

          <div class="source-entry" id="src-numbeo">
            <h4>Numbeo</h4>
            <p class="source-description">Crowdsourced cost of living database. Primary source for COL + Rent Index.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Cost of Living + Rent Index</li>
              <li><strong>Update frequency:</strong> Monthly (crowdsourced)</li>
              <li><strong>Data accessed:</strong> Jan 2026</li>
              <li><strong>Note:</strong> Where direct Numbeo data was unavailable for smaller cities, Numbeo-style estimates were derived from regional cost patterns and AI fact-checked</li>
            </ul>
            <a href="https://www.numbeo.com/cost-of-living/country_result.jsp?country=Portugal" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.numbeo.com/cost-of-living/country_result.jsp?country=Portugal
            </a>
          </div>

          <div class="source-entry" id="src-idealista">
            <h4>Idealista</h4>
            <p class="source-description">Portugal's largest real estate platform. Sole source for office and residential rent metrics in this analysis, using semi-automated live-listing extraction in HITL collaboration (agent + human review).</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Office rent €/m²/month; residential rent €/month by city</li>
              <li><strong>Update frequency:</strong> Real-time listings</li>
              <li><strong>Data accessed:</strong> Jan 2026</li>
              <li><strong>Office scope:</strong> Quality offices in central locations, 60–300 m²</li>
              <li><strong>Residential scope:</strong> 1-bedroom modern apartments in central areas, 40–60 m²</li>
              <li><strong>Method:</strong> Semi-automated extraction from live listings with HITL validation before publication</li>
            </ul>
            <a href="https://www.idealista.pt" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.idealista.pt
            </a>
          </div>

          <div class="source-entry" id="src-damia-2025">
            <h4>Damia Group Portugal — 2025 Tech Salary Benchmark</h4>
            <p class="source-description">Primary salary benchmark source for role/seniority salary ranges in this section. The report uses anonymized recruitment-stage salary expectations (Portuguese tech market), focused on practical hiring competitiveness.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Annual gross salary ranges by role and seniority, market demand/pay context by stack</li>
              <li><strong>Methodology:</strong> 2018–2024 dataset, 5,358 candidates, live interview expectations (no survey forms)</li>
              <li><strong>Edition:</strong> 2025</li>
              <li><strong>Reference page:</strong> Salary benchmark table (page 52)</li>
            </ul>
            <a href="https://www.damiagroup.pt/wp-content/uploads/HTTP-2025-Damia-Group-Portugal.pdf#page=52" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.damiagroup.pt/wp-content/uploads/HTTP-2025-Damia-Group-Portugal.pdf#page=52
            </a>
          </div>

          <div class="source-entry" id="src-idc">
            <h4>EURES — Portugal Labour Market Information</h4>
            <p class="source-description">Official EU labour mobility portal with country labour-market context used for hiring and employment baseline references.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Labour market context, employment and hiring environment</li>
              <li><strong>Update frequency:</strong> Periodic</li>
            </ul>
            <a href="https://eures.europa.eu/living-and-working/labour-market-information/labour-market-information-portugal_en" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://eures.europa.eu/living-and-working/labour-market-information/labour-market-information-portugal_en
            </a>
          </div>

          <div class="source-entry" id="src-cloudflare">
            <h4>ANACOM — Electronic Communications Statistics</h4>
            <p class="source-description">Official ANACOM statistics portal for Portuguese electronic communications and network coverage context.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Network coverage and infrastructure indicators</li>
              <li><strong>Update frequency:</strong> Periodic</li>
            </ul>
            <a href="https://www.anacom.pt/render.jsp?categoryId=520" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.anacom.pt/render.jsp?categoryId=520
            </a>
          </div>

          <div class="source-entry" id="src-telegeography">
            <h4>TeleGeography</h4>
            <p class="source-description">Telecommunications market research firm. Source for global submarine cable data, including routes, landing points, and capacity.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Subsea cable count, landing stations, cable routes</li>
              <li><strong>Update frequency:</strong> Continuous (Submarine Cable Map)</li>
            </ul>
            <a href="https://www.submarinecablemap.com/landing-point/sines-portugal" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.submarinecablemap.com/landing-point/sines-portugal
            </a>
          </div>

          <div class="source-entry" id="src-startcampus">
            <h4>Start Campus / Microsoft Portugal</h4>
            <p class="source-description">Company announcements and planning documents for the Start Campus hyperscale data center development in Sines. Microsoft is the anchor tenant for this 495MW campus.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Capacity (MW), investment value, development timeline</li>
              <li><strong>Update frequency:</strong> Press releases</li>
              <li><strong>Data year:</strong> 2024</li>
            </ul>
            <a href="https://www.startcampus.pt/sines" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.startcampus.pt/sines
            </a>
          </div>

          <div class="source-entry" id="src-pwc-ifici">
            <h4>PwC Portugal — IFICI (ex-NHR 2.0)</h4>
            <p class="source-description">PwC Portugal tax advisory. Reference guide for the IFICI regime — 10-year, 20% flat IRS rate for qualifying scientific research and innovation professionals. Replaces the older NHR for new entrants from 2024.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> IFICI 20% flat IRS rate, 10-year duration, eligibility criteria</li>
              <li><strong>Update frequency:</strong> Annual (budgetary)</li>
            </ul>
            <a href="https://www.pwc.pt/en/services/tax/individuals-taxation/tax-incentive-for-scientific-research-and-innovation-nhr-2-0.html" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.pwc.pt/en/services/tax/individuals-taxation/tax-incentive-for-scientific-research-and-innovation-nhr-2-0.html
            </a>
          </div>

          <div class="source-entry" id="src-pwc-cit-irc">
            <h4>PwC Portugal — CIT General Corporate Income Tax Rates Reduction</h4>
            <p class="source-description">PwC Portugal tax flash summarizing Law 64/2025 of 7 November: reduction of general CIT rates from 2026 onward and updated SME treatment.</p>
            <ul class="source-metrics">
              <li><strong>Metrics:</strong> Standard IRC 19% (2026), 18% (2027), 17% (2028); SMEs and Small Mid Caps 15% on first €50,000 from 2026; surtaxes unchanged</li>
              <li><strong>Published:</strong> 07/11/2025</li>
              <li><strong>Update frequency:</strong> Annual (budgetary / legal updates)</li>
            </ul>
            <a href="https://www.pwc.pt/en/pwcinforfisco/flash/cit/cit-general-corporate-income-tax-rates-reduction.html" target="_blank" rel="noopener" class="source-link-external">
              <i class="fa-solid fa-arrow-up-right-from-square" aria-hidden="true"></i> https://www.pwc.pt/en/pwcinforfisco/flash/cit/cit-general-corporate-income-tax-rates-reduction.html
            </a>
          </div>
        </div>

        <!-- Internal Calculations & Estimates -->
        <div class="source-category" id="sources-internal">
          <h3><i class="fa-solid fa-calculator" aria-hidden="true"></i> Internal Calculations &amp; Estimates</h3>

          <div class="source-entry" id="src-salary-index">
            <details>
              <summary style="cursor: pointer; font-weight: bold; padding: 0.5rem 0;">
                <i class="fa-solid fa-calculator" aria-hidden="true"></i> Salary Index Methodology (Experimental Proxy) <span class="badge-auto">AUTO-CALCULATED</span>
              </summary>
              <div style="padding-top: 1rem;">
                <div class="callout-warning">
                  <strong><i class="fa-solid fa-triangle-exclamation"></i> Experimental model:</strong>
                  Salary differences between Portuguese cities do exist, but this index is an experimental way to approximate them. It is an internal hiring-cost proxy (Lisbon = 100), not an official IT wage series, and the modeled output may be inaccurate for specific roles, companies, or hiring contexts.
                </div>
                <p><strong>Why model this?</strong> Official NUTS II salary data captures real regional income differences, but it also reflects regional job-mix composition. Nearshoring teams still need a city-level directional proxy for compensation planning, so this model combines official baseline signal with explicit assumptions.</p>
                <p><strong>Two-Layer Method:</strong></p>
                <ol>
                  <li><strong>Official input layer:</strong> Compute regional baseline from INE Bachelor earnings (% vs Lisbon). This is the anchor signal.<br>
                    <code>baseline = (regionBachelor / lisbonBachelor) × 100</code><br>
                    <em>Example (Norte): 1947.58 / 2527.71 × 100 = 77.0</em></li>
                  <li><strong>Modeling layer — IT convergence (Step 1):</strong> Compress baseline toward 100 to reflect lower regional dispersion in IT pay vs all-sector averages.<br>
                    <code>compressed = baseline + (100 − baseline) × 0.45</code><br>
                    <em>Example (Norte, baseline 77.0%): 77.0 + (100 − 77.0) × 0.45 = 87.35</em></li>
                  <li><strong>Modeling layer — COL adjustment (Step 2):</strong> Shift by city cost-of-living relative to national average.<br>
                    <code>salaryIndex = compressed + (COL − 33) × 0.65</code><br>
                    <em>Example (Porto, COL 40): 87.35 + (40 − 33) × 0.65 = 87.35 + 4.55 = 91.9</em></li>
                </ol>
                <div class="formula-block">
                  <code>salaryIndex = [baseline + (100 − baseline) × 0.45] + (COL − 33) × 0.65</code><br>
                  <span class="formula-note">Cap: 100 (Lisbon) · IT_CONVERGENCE = 0.45 · NAT_COL_AVG = 33 · COL_SENSITIVITY = 0.65</span>
                </div>
                <p><strong>Parameters:</strong></p>
                <ul>
                  <li><strong>IT_CONVERGENCE = 0.45</strong> — Assumption to reduce all-sector regional dispersion when approximating IT salary differences</li>
                  <li><strong>NATIONAL_COL_AVG = 33</strong> — Numbeo national average COL index (NYC = 100)</li>
                  <li><strong>COL_SENSITIVITY = 0.65</strong> — Assumption: each COL point above/below national average adds/subtracts 0.65 index points</li>
                </ul>
                <p><strong>Example: Porto</strong></p>
                <div class="example-block">
                  INE Norte Bachelor = 77.0% of Lisbon · COL Index = 40<br>
                  Step 1: 77.0 + (100 − 77.0) × 0.45 = <strong>87.35</strong> (compressed)<br>
                  Step 2: 87.35 + (40 − 33) × 0.65 = <strong>91.9</strong> (final salary index)
                </div>
                <ul class="source-metrics">
                  <li><strong>Inputs:</strong> INE regional Bachelor earnings (COMPENSATION_DATA.json) + Numbeo COL index (MASTER.json per city)</li>
                  <li><strong>Method:</strong> Experimental derived proxy combining official NUTS II baseline + explicit modeling assumptions</li>
                  <li><strong>Limitations:</strong> Regional composition effects (industry/job mix), city-vs-region mismatch, role/seniority variance, and remote/hybrid pay policies can materially shift real offers</li>
                  <li><strong>Range:</strong> 81.3 (Covilhã, Castelo Branco) to 100 (Lisbon)</li>
                  <li><strong>Interpretation:</strong> Use this to compare relative salary pressure between cities; do not treat it as an exact same-role market salary estimate</li>
                  <li><strong>Confidence:</strong> Low/Medium (experimental proxy)</li>
                  <li><strong>Validation:</strong> Arithmetic and directional plausibility cross-checked against INE dispersion, Damia benchmark ranges, and COL differentials</li>
                  <li><strong>Implementation:</strong> <code>computeAllSalaryIndices()</code> in calculations.js — runs at startup, auto-updates on data change</li>
                </ul>
                <p><strong>Why this can be wrong (quick):</strong></p>
                <ul class="source-metrics">
                  <li>Regional averages include sector and occupation mix, not just IT roles</li>
                  <li>NUTS II baselines can diverge from specific city labor-market conditions</li>
                  <li>Remote-first and company-specific pay policies can override local patterns</li>
                </ul>
                <div class="callout-info"><strong>Future upgrade:</strong> Replace part of the proxy with role-specific city salary observations as the dataset grows, reducing dependence on regional-level assumptions.</div>
              </div>
            </details>
          </div>

          <div class="source-entry source-entry-detailed" id="src-tech-stemplus">
            <details>
              <summary style="cursor: pointer; font-weight: bold; padding: 0.5rem 0;">
                <i class="fa-solid fa-circle-info" aria-hidden="true"></i> Tech STEM+ Methodology <span class="badge-auto">AUTO-CALCULATED</span>
              </summary>
              <div style="padding-top: 1rem;">
                <div class="callout-success">
                  <strong><i class="fa-solid fa-sync-alt"></i> Internal metric:</strong>
                  Tech STEM+ values are internal benchmark estimates stored in the database and displayed as approximate values (≈). They are not an official DGEEC classification.
                </div>
                <p><strong>Definition:</strong></p>
                <div class="formula-block">
                  <code>Tech STEM+ = projected annual hiring-relevant tech graduate pool (gross, end-2026)</code><br>
                  <span class="formula-note">Built from Tier 1 degree-level output plus Tier 2 CTeSP and Tier 3 vocational estimates</span>
                </div>
                <p class="source-description">Methodology and the particularities of the Portuguese educational system</p>

                <!-- Introduction -->
                <p>
                  This document uses <strong>two complementary metrics</strong>: <span class="meth-card-red meth-card-title meth-inline">Official STEM</span> (DGEEC official count, CNAEF 05+06+07) and <span class="meth-card-blue meth-card-title meth-inline">Tech STEM+</span> (<span id="meth-intro-stem" class="meth-dynamic">~21,486</span> gross/year). Tech STEM+ is an internal <em>hiring-relevant</em> benchmark projected to end-2026.
                </p>

                <!-- Why Two Metrics -->
                <div class="card">
                  <h5><i class="fa-solid fa-layer-group" aria-hidden="true"></i> Why Two Metrics?</h5>
                  <p>
                    <strong class="meth-card-red meth-card-title"><i class="fa-solid fa-user-graduate"></i> Official STEM</strong> (~27,990) uses DGEEC CNAEF codes 05+06+07 (Quantitative Sciences, ICT, Engineering). Ideal for official comparisons.
                  </p>
                  <p>
                    <strong class="meth-card-blue meth-card-title"><i class="fa-solid fa-user-graduate"></i><i class="fa-solid fa-user"></i> Tech STEM+</strong> adds structured estimation layers for engineering, quantitative sciences, CTeSP, and vocational tracks to model practical hiring pool depth.
                  </p>
                </div>

                <!-- CTeSP Explanation -->
                <div class="card-subtle">
                  <h5><i class="fa-solid fa-graduation-cap" aria-hidden="true"></i> CTeSP: Short-Cycle Technical Diplomas (~5.2k/year)</h5>
                  <p>
                    <em>Cursos Técnicos Superiores Profissionais</em>: 2-year programs (120 ECTS) at polytechnics focused on Web Development, Programming, IT Support, and Cybersecurity. The model applies 80% inclusion to reflect field drift into non-tech operational roles.
                  </p>
                </div>

                <!-- Three Definition Cards -->
                <div class="grid-auto-200">
                  <div class="meth-card meth-card-red">
                    <div class="meth-card-title"><i class="fa-solid fa-user-graduate"></i> Official STEM</div>
                    <div class="meth-card-source">DGEEC/Eurostat</div>
                    <div class="meth-card-desc">Natural Sciences + ICT + Engineering</div>
                    <div class="meth-card-total">~27,990/year (official)</div>
                  </div>
                  <div class="meth-card meth-card-blue">
                    <div class="meth-card-title"><i class="fa-solid fa-user-graduate"></i><i class="fa-solid fa-user"></i> Tech STEM+</div>
                    <div class="meth-card-source">Tier 1 + Tier 2 + Tier 3</div>
                    <div class="meth-card-desc">Hiring-relevant gross pool</div>
                    <div id="meth-card-stem" class="meth-card-total">~21,486/year (2026 gross est.)</div>
                  </div>
                  <div class="meth-card meth-card-green">
                    <div class="meth-card-title">Core ICT <span class="meth-card-source">subset</span></div>
                    <div class="meth-card-source">CNAEF 06 only</div>
                    <div class="meth-card-desc">Pure CS/IT specialists</div>
                    <div id="meth-card-ict" class="meth-card-total">~3,267/year (15%)</div>
                  </div>
                </div>

                <!-- Breakdown Table -->
                <div class="card">
                  <div><strong>Tech STEM+ Composition</strong> <span class="meth-card-source">Portugal mainland (NUTS2)</span></div>
                  <p><em>Projected to end-2026 from a 2023/24 base using component-level CAGR assumptions.</em></p>
                  <div class="table-wrapper">
                    <table class="methodology-table">
                      <thead>
                        <tr>
                          <th>Category</th>
                          <th>CNAEF</th>
                          <th class="col-numeric">Graduates</th>
                          <th class="col-numeric">Share</th>
                          <th>Disciplines</th>
                        </tr>
                      </thead>
                      <tbody id="meth-composition-body">
                        <tr>
                          <td><strong class="meth-card-green meth-card-title">Core ICT</strong></td>
                          <td class="meth-card-source">CNAEF 06 (100%)</td>
                          <td id="meth-comp-core-ict" class="col-numeric meth-card-green meth-card-total">3,267</td>
                          <td id="meth-comp-core-ict-share" class="col-numeric">15.2%</td>
                          <td>Official DGEEC NUTS2 subtotal; no estimation</td>
                        </tr>
                        <tr>
                          <td><strong>Engineering Subset</strong></td>
                          <td class="meth-card-source">(STEM − ICT) × 50%</td>
                          <td class="col-numeric meth-card-blue meth-card-total">9,261</td>
                          <td class="col-numeric">43.1%</td>
                          <td>Tech-applicable share of engineering output</td>
                        </tr>
                        <tr>
                          <td><strong>Math/Stats Subset</strong></td>
                          <td class="meth-card-source">18% of STEM × 30%</td>
                          <td class="col-numeric"><strong>1,594</strong></td>
                          <td class="col-numeric">7.4%</td>
                          <td>Minority entering directly tech-hireable roles</td>
                        </tr>
                        <tr>
                          <td><strong>CTeSP (Tier 2)</strong></td>
                          <td class="meth-card-source">National estimate × regional HE share × 80%</td>
                          <td class="col-numeric"><strong>4,704</strong></td>
                          <td class="col-numeric">21.9%</td>
                          <td>Short-cycle technical diplomas with high tech alignment</td>
                        </tr>
                        <tr>
                          <td><strong>Vocational (Tier 3)</strong></td>
                          <td class="meth-card-source">National estimate × population share × 45%</td>
                          <td class="col-numeric"><strong>2,253</strong></td>
                          <td class="col-numeric">10.5%</td>
                          <td>Most uncertain component; higher attrition into non-tech roles</td>
                        </tr>
                        <tr class="region-summary-row">
                          <td colspan="2"><strong>Total Tech STEM+ (Gross 2026)</strong></td>
                          <td id="meth-total-stem" class="col-numeric">21,486</td>
                          <td class="col-numeric">100%</td>
                          <td>Mainland projected annual hiring pool</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="card">
                  <div><strong>Growth Assumptions to End-2026</strong> <span class="meth-card-source">2-year CAGR from 2023/24 base</span></div>
                  <div class="table-wrapper">
                    <table class="methodology-table">
                      <thead>
                        <tr>
                          <th>Component</th>
                          <th class="col-numeric">CAGR</th>
                          <th>Rationale</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><strong>ICT</strong></td>
                          <td class="col-numeric">+6%</td>
                          <td>Slowing from historic peaks; aligned with stabilizing enrollment trends</td>
                        </tr>
                        <tr>
                          <td><strong>Engineering subset</strong></td>
                          <td class="col-numeric">+3%</td>
                          <td>In line with overall higher-education volume growth</td>
                        </tr>
                        <tr>
                          <td><strong>Math/Stats subset</strong></td>
                          <td class="col-numeric">+3%</td>
                          <td>Same baseline growth assumption as Engineering subset</td>
                        </tr>
                        <tr>
                          <td><strong>CTeSP</strong></td>
                          <td class="col-numeric">+8%</td>
                          <td>Fastest tier under RRP-driven VET modernization capacity expansion</td>
                        </tr>
                        <tr>
                          <td><strong>Vocational</strong></td>
                          <td class="col-numeric">+2%</td>
                          <td>Constrained by structural capacity and conversion to tech roles</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="card">
                  <div><strong>Regional Tech STEM+ Gross 2026</strong> <span class="meth-card-source">NUTS2 totals in MASTER.json regional subtotals</span></div>
                  <div class="table-wrapper">
                    <table class="methodology-table">
                      <thead>
                        <tr>
                          <th>Region (NUTS2)</th>
                          <th class="col-numeric">Tech STEM+ Gross 2026</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr><td><strong>Norte</strong></td><td class="col-numeric">7,689</td></tr>
                        <tr><td><strong>Centro</strong></td><td class="col-numeric">4,428</td></tr>
                        <tr><td><strong>Oeste e Vale do Tejo</strong></td><td class="col-numeric">499</td></tr>
                        <tr><td><strong>Lisbon Metro</strong></td><td class="col-numeric">6,474</td></tr>
                        <tr><td><strong>Península de Setúbal</strong></td><td class="col-numeric">1,537</td></tr>
                        <tr><td><strong>Alentejo</strong></td><td class="col-numeric">389</td></tr>
                        <tr><td><strong>Algarve</strong></td><td class="col-numeric">470</td></tr>
                        <tr class="region-summary-row"><td><strong>Mainland Total</strong></td><td class="col-numeric"><strong>21,486</strong></td></tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- Coverage Note -->
                <div class="callout-warning">
                  <strong><i class="fa-solid fa-triangle-exclamation"></i> Coverage:</strong>
                  Figures cover <strong>Portugal mainland NUTS2 regions</strong> (Norte, Centro, Oeste e Vale do Tejo, Lisbon Metro, Península de Setúbal, Alentejo, Algarve), excluding islands.
                </div>

                <!-- Portugal vs Germany Comparison -->
                <div class="card">
                  <h5><i class="fa-solid fa-scale-balanced" aria-hidden="true"></i> Counting Differences: Portugal vs. Germany</h5>
                  <div class="grid-2">
                    <div class="comparison-card comparison-card-accent">
                      <div class="comparison-card-title">Portugal</div>
                      <ul>
                        <li>CTeSP (2-year) counts as higher education (EQF 5)</li>
                        <li>Tiered pipeline includes degree-level, CTeSP, and vocational channels</li>
                        <li>Tech STEM+ combines official counts and modeled inclusion rates for hiring relevance</li>
                      </ul>
                    </div>
                    <div class="comparison-card comparison-card-neutral">
                      <div class="comparison-card-title">Germany</div>
                      <ul>
                        <li>Ausbildung/Dual system tracked separately</li>
                        <li>Fachinformatiker not in graduate stats</li>
                        <li>Hidden talent: ~30-40% above grad stats</li>
                      </ul>
                    </div>
                  </div>
                  <p><strong>Bottom line:</strong> Classification difference, not quality difference. For business decisions, consider both systems; for academic comparisons, use Official STEM.</p>
                </div>

                <!-- Scope: Includes/Excludes -->
                <div class="grid-2">
                  <div class="scope-card">
                    <strong class="scope-label scope-include">✓ Includes</strong>
                    <span>ICT (100%), engineering tech subset (50%), math/stats subset (18% × 30%), CTeSP (80%), vocational tech tracks (45%)</span>
                  </div>
                  <div class="scope-card">
                    <strong class="scope-label scope-exclude">✗ Excludes</strong>
                    <span>Non-tech engineering branches, non-digital vocational tracks, and non-tech destination graduates</span>
                  </div>
                </div>

                <!-- Estimate Note -->
                <div class="callout-warning">
                  <strong><i class="fa-solid fa-calculator"></i> Estimate:</strong>
                  Tech STEM+ (~21,486 gross) is an <strong>internal benchmark estimate</strong> used for hiring-pool analysis. Net available pool can be approximated by multiplying gross values by <strong>0.745</strong> (17.5% emigration and 12% inactivity discounts).
                </div>

                <!-- Source Footer -->
                <div class="scorecard-footer" data-db="content">
                  <strong>Sources:</strong>
                  DGEEC RAIDES 2023/24 graduates · EU Education Monitor 2025 · CNAEF codes (Portaria 256/2005) · internal projection assumptions to end-2026
                </div>
              </div>
            </details>
          </div>

          <div class="source-entry" id="src-ict-pct">
            <h4>ICT % Calculation <span class="badge-auto">AUTO-CALCULATED</span></h4>
            <p class="source-description">Core ICT graduates as a percentage of <strong>Official STEM</strong> graduates per city.</p>
            <div class="formula-block">
              <code>ICT % = (Core ICT Graduates / Official STEM Graduates) × 100</code>
            </div>
            <ul class="source-metrics">
              <li><strong>Inputs:</strong> DGEEC Core ICT count + Official STEM count (both from MASTER.json)</li>
              <li><strong>Method:</strong> Simple ratio — auto-calculated by JS on page load</li>
              <li><strong>Note:</strong> Uses Official STEM (not Tech STEM+) as denominator to match Eurostat methodology</li>
            </ul>
          </div>

          <div class="source-entry" id="src-col-index">
            <h4>COL + Rent Index Normalization</h4>
            <p class="source-description">Cost of Living Plus Rent Index with New York City = 100 as baseline.</p>
            <ul class="source-metrics">
              <li><strong>Source:</strong> Numbeo Cost of Living Plus Rent Index</li>
              <li><strong>Method:</strong> Cities without direct Numbeo data use Numbeo-style estimates derived from regional cost patterns, cross-verified via AI fact-check consensus</li>
              <li><strong>Caveat:</strong> Crowdsourced data — sample sizes vary by city. Smaller cities may rely more on estimated values.</li>
            </ul>
          </div>
        </div>

      </div>
    </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  EXECUTIVE SUMMARY                                                      ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-macro" id="executive-summary">
      <summary class="deeper-dive-summary">
        <span class="section-number">1</span>
        <i class="fa-solid fa-chart-line section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">Portugal: Macroeconomic Scorecard</span>
        <span class="deeper-dive-subtitle">— EU comparison across macroeconomic and social indicators</span>
        <span class="section-confidence" data-section="macroeconomic"></span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">
        <div class="macro-comparison-card" data-db="content" data-prompt-core="true">
          <h3 class="macro-comparison-title" id="macro-comparison-title">Portugal in European Context</h3>
          <p class="macro-comparison-subtitle" id="macro-comparison-subtitle">Selected indicators compared with EU and Germany</p>

          <div class="table-wrapper macro-comparison-wrapper">
            <table class="macro-comparison-table" aria-label="EU Germany Portugal comparison table">
              <thead>
                <tr>
                  <th scope="col">Selected indicators</th>
                  <th scope="col" class="col-country col-eu"><span class="country-head">🇪🇺 European Union</span></th>
                  <th scope="col" class="col-country col-de"><span class="country-head">🇩🇪 Germany</span></th>
                  <th scope="col" class="col-country col-pt"><span class="country-head">🇵🇹 Portugal</span></th>
                </tr>
              </thead>
              <tbody id="macro-comparison-body">
                <!-- Dynamically rendered from WEBSITE_CONTENT.json by contentRenderer.js -->
              </tbody>
            </table>
          </div>

          <p class="macro-comparison-footnote" id="macro-comparison-na-note">N/A = Data not available</p>
          <p class="macro-comparison-footer">
            <strong>Source:</strong>
            <a href="#src-eurostat-countryfacts" class="source-link">Eurostat — Country Facts (EU, Germany, Portugal)</a>
          </p>
        </div>
      </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  DIGITAL INFRASTRUCTURE & CONNECTIVITY                                  ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-infra" id="digital-infrastructure">
      <summary class="deeper-dive-summary">
        <span class="section-number">2</span>
        <i class="fa-solid fa-tower-broadcast section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">Digital Infrastructure</span>
        <span class="deeper-dive-subtitle">— Connectivity, subsea cables, data centers, 5G coverage</span>
        <span class="section-confidence" data-section="digitalInfra"></span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">

        <!-- 5G + Broadband Stats -->
        <div class="hero-stat-banner" data-db="content" data-prompt-core="true">
          <div class="grid-auto-180">
            <div class="stat-hero" id="digi-hero-latency">
              <div class="stat-value">&lt;25ms</div>
              <div class="stat-label">Latency to Frankfurt</div>
              <div class="stat-source"><a href="#src-anacom" class="source-link">ANACOM</a></div>
            </div>
            <div class="stat-hero" id="digi-hero-4g">
              <div class="stat-value">95%+</div>
              <div class="stat-label">4G Population Coverage</div>
              <div class="stat-source"><a href="#src-anacom" class="source-link">ANACOM</a></div>
            </div>
            <div class="stat-hero" id="digi-hero-ftth">
              <div class="stat-value">60%+</div>
              <div class="stat-label">FTTH Penetration</div>
              <div class="stat-source"><a href="#src-anacom" class="source-link">ANACOM</a></div>
            </div>
            <div class="stat-hero" id="digi-hero-5g">
              <div class="stat-value">5G Live</div>
                    <div class="stat-label">All 3 Operators (2024)</div>
                    <div class="stat-source"><a href="#src-anacom" class="source-link">ANACOM</a></div>
                  </div>
                  <div class="stat-hero" id="digi-hero-cables">
                    <div class="stat-value">14+</div>
                    <div class="stat-label">Subsea Cable Systems</div>
                    <div class="stat-source"><a href="#src-anacom" class="source-link">ANACOM</a></div>
                  </div>
                </div>
              </div>

              <!-- Geostrategic Position -->
              <div class="callout-accent" data-db="content" data-prompt-core="true">
                <strong><i class="fa-solid fa-globe-europe"></i> Geostrategic Advantage:</strong>
                Portugal's Atlantic position puts Sines at a uniquely low-latency crossroads between Europe, Africa, the Americas, and the Middle East. It is the westernmost data-landing point in continental Europe.
              </div>

              <!-- Subsea Cable Map -->
              <div class="grid-2">
                <div class="card cable-map-card">
                  <h3 class="cable-card-title"><i class="fa-solid fa-anchor"></i> Portugal - European Subsea Cable Hub</h3>
                  <div class="cable-map-container">
                    <!-- SVG Map - Apple-quality with accurate cable routes -->
                            <svg viewBox="0 0 520 780" class="subsea-cable-map" aria-label="Portugal subsea cable infrastructure map">
                                <defs>
                                    <!-- Ocean gradient - Light mode -->
                                    <linearGradient id="oceanGradientPremium" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" class="ocean-stop-1" style="stop-color:#f0f9ff;stop-opacity:1" />
                                        <stop offset="50%" class="ocean-stop-2" style="stop-color:#e0f2fe;stop-opacity:1" />
                                        <stop offset="100%" class="ocean-stop-3" style="stop-color:#dbeafe;stop-opacity:1" />
                                    </linearGradient>
                                    <!-- Ocean gradient - Dark mode -->
                                    <linearGradient id="oceanGradientDark" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#0c1222;stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#0f172a;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#1e293b;stop-opacity:1" />
                                    </linearGradient>
                                    <!-- Land gradient - Light mode -->
                                    <linearGradient id="landGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" class="land-stop-1" style="stop-color:#f8fafc;stop-opacity:1" />
                                        <stop offset="100%" class="land-stop-2" style="stop-color:#f1f5f9;stop-opacity:1" />
                                    </linearGradient>
                                    <!-- Land gradient - Dark mode -->
                                    <linearGradient id="landGradientDark" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#334155;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#475569;stop-opacity:1" />
                                    </linearGradient>
                                    <!-- Glow filter for landing points -->
                                    <filter id="glowBlue" x="-50%" y="-50%" width="200%" height="200%">
                                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                    </filter>
                                    <filter id="glowOrange" x="-50%" y="-50%" width="200%" height="200%">
                                        <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                                        <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
                                    </filter>
                                    <!-- Cable line caps -->
                                    <marker id="cableEnd" markerWidth="6" markerHeight="6" refX="3" refY="3">
                                        <circle cx="3" cy="3" r="2.5" fill="currentColor" opacity="0.8"/>
                                    </marker>
                                </defs>
                                
                                <!-- Ocean background -->
                                <rect class="ocean-bg" x="0" y="0" width="520" height="780" fill="url(#oceanGradientPremium)"/>
                                
                                <!-- Subtle grid pattern -->
                                <g class="grid-lines" opacity="0.08">
                                    <line x1="0" y1="150" x2="520" y2="150" stroke="#64748b" stroke-width="0.5"/>
                                    <line x1="0" y1="300" x2="520" y2="300" stroke="#64748b" stroke-width="0.5"/>
                                    <line x1="0" y1="450" x2="520" y2="450" stroke="#64748b" stroke-width="0.5"/>
                                    <line x1="0" y1="600" x2="520" y2="600" stroke="#64748b" stroke-width="0.5"/>
                                    <line x1="150" y1="0" x2="150" y2="780" stroke="#64748b" stroke-width="0.5"/>
                                    <line x1="300" y1="0" x2="300" y2="780" stroke="#64748b" stroke-width="0.5"/>
                                </g>
                                
                                <!-- Portugal Landmass - High detail coastline -->
                                <path class="land-mass" d="M 300 60 
                                         Q 285 65, 275 85 L 268 115 Q 262 145, 270 175 L 278 205 
                                         Q 282 225, 278 250 L 275 285 Q 270 315, 278 345 
                                         L 285 375 Q 292 400, 290 425 L 295 455 
                                         Q 300 470, 298 490 L 295 520 Q 290 550, 295 580 
                                         L 300 610 Q 305 635, 302 660 L 298 690 
                                         Q 295 710, 305 725 L 320 738 Q 345 748, 385 752 
                                         L 435 755 Q 470 755, 500 750 L 520 745
                                         L 520 60 Z" 
                                      fill="url(#landGradient)" stroke="#94a3b8" stroke-width="2"/>
                                
                                <!-- Coastline shadow for depth -->
                                <path class="coastline-shadow" d="M 300 60 
                                         Q 285 65, 275 85 L 268 115 Q 262 145, 270 175 L 278 205 
                                         Q 282 225, 278 250 L 275 285 Q 270 315, 278 345 
                                         L 285 375 Q 292 400, 290 425 L 295 455 
                                         Q 300 470, 298 490 L 295 520 Q 290 550, 295 580 
                                         L 300 610 Q 305 635, 302 660 L 298 690 
                                         Q 295 710, 305 725 L 320 738 Q 345 748, 385 752 
                                         L 435 755 Q 470 755, 500 750" 
                                      fill="none" stroke="#cbd5e1" stroke-width="5" opacity="0.3" stroke-linecap="round"/>
                                
                                <!-- Geographic labels -->
                                <text class="geo-label-light" x="400" y="350" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="16" font-weight="300" fill="#94a3b8" letter-spacing="3">Portugal</text>
                                <text class="geo-label-muted" x="80" y="380" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="14" font-weight="300" fill="#64748b" letter-spacing="2" opacity="0.7">ATLANTIC</text>
                                <text class="geo-label-muted" x="85" y="398" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="14" font-weight="300" fill="#64748b" letter-spacing="2" opacity="0.7">OCEAN</text>
                                
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                <!-- CABLE ROUTES - Accurately mapped from submarinecablemap.com     -->
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                
                                <!-- 1. NUVEM (Google) - Sines → Bermuda/USA (Northwest) - PLANNED -->
                                <path d="M 295 580 
                                         C 220 530, 140 420, 60 280" 
                                      stroke="#ec4899" stroke-width="3.5" fill="none" opacity="0.55" 
                                      stroke-dasharray="12,6" stroke-linecap="round"/>
                                <circle cx="60" cy="280" r="5" fill="#ec4899" opacity="0.55"/>
                                
                                <!-- 2. ELLALINK - Sines → Brazil (Southwest) - ACTIVE -->
                                <path d="M 295 580 
                                         C 200 610, 100 660, 30 720" 
                                      stroke="#0ea5e9" stroke-width="3.5" fill="none" opacity="0.85" 
                                      stroke-linecap="round"/>
                                <circle cx="30" cy="720" r="5" fill="#0ea5e9"/>
                                
                                <!-- 3. ACE - Carcavelos → West Africa (South-Southwest) - ACTIVE -->
                                <path d="M 292 475 
                                         C 220 520, 130 590, 50 680" 
                                      stroke="#10b981" stroke-width="3.5" fill="none" opacity="0.85" 
                                      stroke-linecap="round"/>
                                <circle cx="50" cy="680" r="5" fill="#10b981"/>
                                
                                <!-- 4. MAINONE - Seixal → West Africa (South) - ACTIVE -->
                                <path d="M 298 465 
                                         C 240 510, 170 600, 85 730" 
                                      stroke="#06b6d4" stroke-width="3.5" fill="none" opacity="0.85" 
                                      stroke-linecap="round"/>
                                <circle cx="85" cy="730" r="5" fill="#06b6d4"/>
                                
                                <!-- 5. EQUIANO (Google) - Sesimbra → South Africa (South) - ACTIVE -->
                                <path d="M 296 500 
                                         C 230 560, 150 650, 70 770" 
                                      stroke="#f59e0b" stroke-width="3.5" fill="none" opacity="0.85" 
                                      stroke-linecap="round"/>
                                <circle cx="70" cy="770" r="4" fill="#f59e0b"/>
                                
                                <!-- 6. 2AFRICA (Meta) - Carcavelos → Africa Ring (South then East) - ACTIVE -->
                                <path d="M 292 475 
                                         C 200 480, 120 520, 40 600" 
                                      stroke="#8b5cf6" stroke-width="3.5" fill="none" opacity="0.85" 
                                      stroke-linecap="round"/>
                                <circle cx="40" cy="600" r="5" fill="#8b5cf6"/>
                                
                                <!-- 7. MEDUSA - Carcavelos → Mediterranean (Around south coast via Gibraltar) - PLANNED -->
                                <path d="M 292 475 
                                         C 285 540, 280 620, 280 690
                                         C 280 740, 290 770, 330 780
                                         C 380 790, 450 785, 520 770" 
                                      stroke="#ef4444" stroke-width="3.5" fill="none" opacity="0.55" 
                                      stroke-dasharray="12,6" stroke-linecap="round"/>
                                
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                <!-- LANDING POINTS - Major cable stations                           -->
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                
                                <!-- Porto (reference city) -->
                                <circle cx="278" cy="205" r="5" fill="#64748b" stroke="white" stroke-width="2"/>
                                <text class="city-label" x="290" y="200" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="11" fill="#64748b" font-weight="500">Porto</text>
                                
                                <!-- Lisbon Metro Area Label -->
                                <text class="city-label-primary" x="315" y="440" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="14" fill="#1e293b" font-weight="600">Lisbon Metro</text>
                                <text class="city-label-secondary" x="315" y="454" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b" font-weight="400">(Major Cable Hub)</text>
                                
                                <!-- Carcavelos - Primary landing station -->
                                <circle cx="292" cy="475" r="8" fill="#2563eb" stroke="white" stroke-width="3" filter="url(#glowBlue)"/>
                                <text class="landing-label" x="305" y="480" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="10" fill="#1e40af" font-weight="600">Carcavelos</text>
                                
                                <!-- Seixal - MainOne landing -->
                                <circle cx="298" cy="465" r="5" fill="#0891b2" stroke="white" stroke-width="2"/>
                                <text class="city-label" x="310" y="467" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b" font-weight="500">Seixal</text>
                                
                                <!-- Sesimbra - Equiano landing -->
                                <circle cx="296" cy="500" r="6" fill="#2563eb" stroke="white" stroke-width="2"/>
                                <text class="city-label" x="308" y="505" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="10" fill="#64748b" font-weight="500">Sesimbra</text>
                                
                                <!-- Sines - Emerging hub (highlighted) -->
                                <circle cx="295" cy="580" r="10" fill="#f59e0b" stroke="white" stroke-width="3" filter="url(#glowOrange)"/>
                                <text class="city-label-primary" x="310" y="575" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="12" fill="#1e293b" font-weight="700">Sines</text>
                                <text x="310" y="590" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#d97706" font-weight="500">Emerging Hub</text>
                                
                                <!-- Algarve region marker -->
                                <circle cx="380" cy="752" r="4" fill="#94a3b8" stroke="white" stroke-width="1.5"/>
                                <text class="city-label" x="392" y="756" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#94a3b8">Algarve</text>
                                
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                <!-- CABLE DESTINATION LABELS                                        -->
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                
                                <!-- Nuvem destination -->
                                <g transform="translate(20, 260)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="12" fill="#db2777" font-weight="600">Nuvem</text>
                                    <text y="13" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="8" fill="#db2777" opacity="0.8">PLANNED 2026</text>
                                    <text y="24" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b">→ Bermuda, USA</text>
                                </g>
                                
                                <!-- 2Africa destination -->
                                <g transform="translate(15, 570)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="12" fill="#7c3aed" font-weight="600">2Africa</text>
                                    <text y="12" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b">→ Africa Ring</text>
                                </g>
                                
                                <!-- ACE destination -->
                                <g transform="translate(15, 655)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="12" fill="#059669" font-weight="600">ACE</text>
                                    <text y="12" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b">→ West Africa</text>
                                </g>
                                
                                <!-- EllaLink destination -->
                                <g transform="translate(15, 700)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="12" fill="#0284c7" font-weight="600">EllaLink</text>
                                    <text y="12" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b">→ Brazil</text>
                                </g>
                                
                                <!-- MainOne destination -->
                                <g transform="translate(55, 745)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="11" fill="#0891b2" font-weight="600">MainOne</text>
                                    <text y="11" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="8" fill="#64748b">→ W. Africa</text>
                                </g>
                                
                                <!-- Equiano destination -->
                                <g transform="translate(35, 768)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="10" fill="#d97706" font-weight="600">Equiano</text>
                                </g>
                                
                                <!-- Medusa destination -->
                                <g transform="translate(430, 610)">
                                    <text font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="12" fill="#dc2626" font-weight="600">Medusa</text>
                                    <text y="13" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="8" fill="#dc2626" opacity="0.8">PLANNED 2026</text>
                                    <text y="24" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" font-size="9" fill="#64748b">→ Mediterranean</text>
                                </g>
                                
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                <!-- LEGEND - Cable colors                                           -->
                                <!-- ═══════════════════════════════════════════════════════════════ -->
                                <g class="cable-legend" transform="translate(20, 25)">
                                    <rect class="legend-bg" x="0" y="0" width="180" height="175" fill="white" opacity="0.97" rx="10" 
                                          stroke="#e2e8f0" stroke-width="1"/>
                                    
                                    <!-- Legend title -->
                                    <text class="legend-title" x="14" y="22" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="11" font-weight="600" fill="#1e293b" letter-spacing="0.5">CABLE LEGEND</text>
                                    <line class="legend-divider" x1="14" y1="32" x2="166" y2="32" stroke="#e2e8f0" stroke-width="1"/>
                                    
                                    <!-- Active cables -->
                                    <text class="legend-label" x="14" y="50" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="8" font-weight="600" fill="#64748b" letter-spacing="1">ACTIVE</text>
                                    
                                    <!-- ACE -->
                                    <line x1="14" y1="66" x2="40" y2="66" stroke="#10b981" stroke-width="3" stroke-linecap="round"/>
                                    <text class="cable-name" x="48" y="70" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">ACE</text>
                                    
                                    <!-- EllaLink -->
                                    <line x1="14" y1="84" x2="40" y2="84" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round"/>
                                    <text class="cable-name" x="48" y="88" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">EllaLink</text>
                                    
                                    <!-- MainOne -->
                                    <line x1="100" y1="66" x2="126" y2="66" stroke="#06b6d4" stroke-width="3" stroke-linecap="round"/>
                                    <text class="cable-name" x="134" y="70" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">MainOne</text>
                                    
                                    <!-- Equiano -->
                                    <line x1="100" y1="84" x2="126" y2="84" stroke="#f59e0b" stroke-width="3" stroke-linecap="round"/>
                                    <text class="cable-name" x="134" y="88" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">Equiano</text>
                                    
                                    <!-- 2Africa -->
                                    <line x1="14" y1="102" x2="40" y2="102" stroke="#8b5cf6" stroke-width="3" stroke-linecap="round"/>
                                    <text class="cable-name" x="48" y="106" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">2Africa</text>
                                    
                                    <!-- Planned cables -->
                                    <text class="legend-label" x="14" y="128" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="8" font-weight="600" fill="#64748b" letter-spacing="1">PLANNED 2026</text>
                                    
                                    <!-- Medusa -->
                                    <line x1="14" y1="144" x2="40" y2="144" stroke="#ef4444" stroke-width="3" stroke-dasharray="6,3" stroke-linecap="round"/>
                                    <text class="cable-name" x="48" y="148" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">Medusa</text>
                                    
                                    <!-- Nuvem -->
                                    <line x1="100" y1="144" x2="126" y2="144" stroke="#ec4899" stroke-width="3" stroke-dasharray="6,3" stroke-linecap="round"/>
                                    <text class="cable-name" x="134" y="148" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="10" fill="#1e293b" font-weight="500">Nuvem</text>
                                    
                                    <!-- Landing point indicators -->
                                    <circle cx="22" cy="165" r="4" fill="#2563eb" stroke="white" stroke-width="1.5"/>
                                    <text class="legend-label" x="32" y="169" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="9" fill="#64748b">Cable station</text>
                                    <circle cx="110" cy="165" r="4" fill="#f59e0b" stroke="white" stroke-width="1.5"/>
                                    <text class="legend-label" x="120" y="169" font-family="-apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif" 
                                          font-size="9" fill="#64748b">Emerging hub</text>
                                </g>
                            </svg>
                  </div>
                </div>

                <!-- Cable Table -->
                <div class="card">
                  <h3 class="cable-card-title"><i class="fa-solid fa-list-check"></i> List of Portuguese Subsea Cables</h3>
                  <div class="table-wrapper">
                    <table class="cable-table" data-db="content" data-prompt-core="true" aria-label="Submarine cable systems landing in Portugal">
                      <thead>
                        <tr>
                          <th>Cable Name</th>
                          <th>Landing Point</th>
                          <th>Status</th>
                          <th>Key Destinations</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- Cables shown on map (featured) -->
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-green"></span><strong>ACE</strong></td>
                          <td>Carcavelos</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>West Africa, South Africa</td>
                        </tr>
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-sky"></span><strong>EllaLink</strong></td>
                          <td>Sines</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>Brazil, Cape Verde</td>
                        </tr>
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-amber"></span><strong>Equiano</strong></td>
                          <td>Sesimbra</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>South Africa, Namibia, Nigeria</td>
                        </tr>
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-purple"></span><strong>2Africa</strong></td>
                          <td>Carcavelos</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>Africa ring, Middle East, Asia</td>
                        </tr>
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-cyan"></span><strong>MainOne</strong></td>
                          <td>Seixal</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>West Africa (Nigeria, Ghana)</td>
                        </tr>
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-red"></span><strong>Medusa</strong></td>
                          <td>Carcavelos</td>
                          <td><span class="badge badge-planned">2026</span></td>
                          <td>Mediterranean, N. Africa</td>
                        </tr>
                        <tr class="cable-row cable-row-featured">
                          <td><span class="cable-dot cable-dot-rose"></span><strong>Nuvem</strong></td>
                          <td>Sines</td>
                          <td><span class="badge badge-planned">2026</span></td>
                          <td>Bermuda, USA</td>
                        </tr>
                        <!-- Other active cables -->
                        <tr class="cable-row">
                          <td>WACS</td>
                          <td>Seixal</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>West Africa, South Africa</td>
                        </tr>
                        <tr class="cable-row">
                          <td>SAT-3/WASC</td>
                          <td>Sesimbra</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>West Africa, South Africa</td>
                        </tr>
                        <tr class="cable-row">
                          <td>SEA-ME-WE-3</td>
                          <td>Sesimbra</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>SE Asia, Middle East</td>
                        </tr>
                        <tr class="cable-row">
                          <td>Europe India Gateway</td>
                          <td>Sesimbra</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>India via Mediterranean</td>
                        </tr>
                        <tr class="cable-row">
                          <td>Tata TGN-W. Europe</td>
                          <td>Carcavelos</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>UK, Spain, Europe</td>
                        </tr>
                        <tr class="cable-row">
                          <td>GLO-1</td>
                          <td>Carcavelos</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>UK, Portugal, Nigeria</td>
                        </tr>
                        <tr class="cable-row">
                          <td>BUGIO</td>
                          <td>Sesimbra–Carcavelos</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>Domestic interconnector</td>
                        </tr>
                        <tr class="cable-row">
                          <td>CAM Ring</td>
                          <td>Lisbon</td>
                          <td><span class="badge badge-active">ACTIVE</span></td>
                          <td>Madeira, Azores</td>
                        </tr>
                        <!-- Legacy / Decommissioned -->
                        <tr class="cable-row cable-row-decom">
                          <td><em>Sagres</em></td>
                          <td>Sesimbra–Burgau</td>
                          <td><span class="badge badge-legacy">LEGACY</span></td>
                          <td>Domestic connector</td>
                        </tr>
                        <tr class="cable-row cable-row-decom">
                          <td><em>Atlantis-2</em></td>
                          <td>Sesimbra</td>
                          <td><span class="badge badge-legacy">LEGACY</span></td>
                          <td>Canary Islands, S. America</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <!-- Sines Tech Hub Deep Dive -->
              <div class="sines-deep-dive" data-db="content" data-prompt-core="true">
                <div class="sines-header">
                  <h3><i class="fa-solid fa-server"></i> Sines Tech Deep Dive</h3>
                  <span class="sines-badge"><i class="fa-solid fa-bolt"></i> Emerging Hub</span>
                </div>
                <div class="grid-auto-260">
                  <div class="sines-card">
                    <h4><i class="fa-solid fa-database"></i> Data Center Cluster</h4>
                    <ul>
                      <li><strong>Start Campus:</strong> 495MW planned hyperscale campus (Microsoft anchor tenant) <a href="#src-startcampus" class="source-link" title="Start Campus">↗</a></li>
                      <li><strong>Capacity:</strong> One of Iberia's largest planned data center campuses <a href="#src-startcampus" class="source-link" title="Start Campus">↗</a></li>
                      <li><strong>Investment:</strong> €3.5B+ planned development value <a href="#src-startcampus" class="source-link" title="Start Campus">↗</a></li>
                    </ul>
                  </div>
                  <div class="sines-card">
                    <h4><i class="fa-solid fa-bolt"></i> Green Energy</h4>
                    <ul>
                      <li><strong>Solar Capacity:</strong> GW-scale solar projects in planning <a href="#src-startcampus" class="source-link" title="Start Campus">↗</a></li>
                      <li><strong>Green Hydrogen:</strong> Industrial projects in development pipeline <a href="#src-startcampus" class="source-link" title="Start Campus">↗</a></li>
                      <li><strong>Grid:</strong> Direct connection to national high-voltage grid <a href="#src-startcampus" class="source-link" title="Start Campus">↗</a></li>
                    </ul>
                  </div>
                  <div class="sines-card">
                    <h4><i class="fa-solid fa-ship"></i> Port Infrastructure</h4>
                    <ul>
                      <li><strong>Deep Water:</strong> Natural draft of 28m — no dredging needed <a href="#src-porto-sines" class="source-link" title="Porto de Sines">↗</a></li>
                      <li><strong>Connectivity:</strong> Direct subsea cable landing station <a href="#src-porto-sines" class="source-link" title="Porto de Sines / APS">↗</a></li>
                      <li><strong>Logistics:</strong> Rail link to Spain and trans-European network <a href="#src-porto-sines" class="source-link" title="Porto de Sines">↗</a></li>
                    </ul>
                  </div>
                </div>
                <div class="sines-callout">
                  <strong><i class="fa-solid fa-lightbulb"></i> Strategic Impact:</strong>
                  Sines combines hyperscale data center deployment, subsea connectivity, and renewable-energy projects in one location, supporting Portugal's role in Southern European digital infrastructure
                  <a href="#src-startcampus" class="source-link" title="Start Campus">(Start Campus ↗)</a>
                  <a href="#src-porto-sines" class="source-link" title="Porto de Sines">(Port of Sines ↗)</a>.
                </div>
              </div>

            </div>
          </div>
        </div>
      </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  STRATEGIC CONSIDERATIONS                                               ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-strategic" id="operational-considerations">
      <summary class="deeper-dive-summary">
        <span class="section-number">3</span>
        <i class="fa-solid fa-gears section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">Strategic Considerations</span>
        <span class="deeper-dive-subtitle">— Tax incentives, labor market, healthcare, cost of living</span>
        <span class="section-confidence" data-section="strategic"></span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">

        <!-- Tax Incentives -->
        <div id="tax-incentives" class="section-block" data-db="content">
          <h3><i class="fa-solid fa-coins" aria-hidden="true"></i> Tax Incentives — IT &amp; Tech (Mainland Portugal)</h3>
          <div class="grid-auto-260">
            <div class="card" data-prompt-core="true">
              <h4><i class="fa-solid fa-flask" aria-hidden="true"></i> <a href="#src-ani" class="source-link">SIFIDE II — R&amp;D Tax Credit</a></h4>
              <div id="tax-sifide-body">
              <p><strong>R&amp;D Tax Credit:</strong> 32.5% base credit + 50% incremental credit on increased R&amp;D spend (up to €1.5M).</p>
              <p>Eligible costs include salaries, equipment, software, and contracted R&amp;D.</p>
              <p class="scorecard-source">Annual application via <a href="#src-ani" class="source-link">ANI</a></p>
              </div>
            </div>
            <div class="card" data-prompt-core="true">
              <h4><i class="fa-solid fa-passport" aria-hidden="true"></i> <a href="#src-iapmei" class="source-link">Tech Visa — Skilled Talent Immigration</a></h4>
              <div id="tax-techvisa-body">
              <p>Fast-track work and residence permits for highly qualified non-EU tech professionals hired by certified companies. Includes pathways tailored for innovation and startups.</p>
              <p class="scorecard-source">Managed by <a href="#src-iapmei" class="source-link">IAPMEI</a> + AIMA/SEF</p>
              </div>
            </div>
            <div class="card" data-prompt-core="true">
              <h4><i class="fa-solid fa-percent" aria-hidden="true"></i> <a href="#src-pwc-ifici" class="source-link">IFICI — Scientific Research &amp; Innovation</a></h4>
              <div id="tax-ifici-body">
              <p>10-year regime offering a <strong>20% flat IRS rate</strong> on eligible employment/self-employment income for qualifying research and innovation professionals.</p>
              <p class="scorecard-source">Replaces the older NHR for new entrants from 2024. <a href="#src-pwc-ifici" class="source-link">Source</a></p>
              </div>
            </div>
            <div class="card" data-prompt-core="true">
              <h4><i class="fa-solid fa-building" aria-hidden="true"></i> <a href="#src-pwc-cit-irc" class="source-link">Corporate Tax (IRC)</a></h4>
              <div id="tax-irc-body">
              <p><strong>Standard IRC:</strong> 21% on taxable profit. <strong>SMEs:</strong> 16% on the first €50,000; 21% thereafter.</p>
              <p>Municipal surtax: up to 1.5%. State surtax: 3–9% on higher profit brackets.</p>
              <p class="scorecard-source"><a href="#src-pwc-cit-irc" class="source-link">PwC Portugal</a></p>
              </div>
            </div>
          </div>
        </div>

        <!-- Labor Market -->
        <div id="labor-market" class="section-block">
          <h3><i class="fa-solid fa-scale-balanced" aria-hidden="true"></i> Labor Market Overview</h3>

                <!-- Salary Table -->
                <div class="card">
                  <h4><i class="fa-solid fa-money-bill-wave" aria-hidden="true"></i> Salary Benchmark by Role, Seniority &amp; Tech Stack (Annual Gross, €)</h4>
                  <div class="table-wrapper">
                    <table class="salary-table" data-db="content" data-prompt-core="true" aria-label="Portugal salary benchmark by role and seniority">
                      <thead>
                        <tr>
                          <th>Role</th>
                          <th class="col-numeric">Junior (0–3yr)</th>
                          <th class="col-numeric">Mid (&gt;3–5yr)</th>
                          <th class="col-numeric">Senior (&gt;5yr)</th>
                          <th class="col-numeric">Lead / Management</th>
                          <th>Tech Stack Context</th>
                        </tr>
                      </thead>
                      <tbody id="salary-table-body">
                        <!-- Dynamically populated from WEBSITE_CONTENT.json (laborMarket.damiaBenchmark.roleSeniorityTable) -->
                      </tbody>
                    </table>
                  </div>
                  <p class="scorecard-footer" id="damia-salary-note"><strong>Methodology:</strong> Candidate salary expectations captured in live recruitment processes (2018–2024, n=5,358). Values represent practical annual gross offer ranges by role and seniority. <strong>Source:</strong> <a href="#src-damia-2025" class="source-link">Damia Group Portugal (2025 benchmark)</a>.<br><a href="#src-idc" class="source-link">EURES Portugal Labour Market Information</a>.</p>

                  <h5><i class="fa-solid fa-table-cells-large" aria-hidden="true"></i> Key Facts from Damia 2025 Benchmark</h5>
                  <div class="grid-auto-260" data-prompt-core="true">
                    <div class="insight-card">
                      <div class="insight-title"><i class="fa-solid fa-database"></i> Sample Size</div>
                      <div class="insight-text">5,358 candidates in the Portuguese tech market dataset.</div>
                    </div>
                    <div class="insight-card">
                      <div class="insight-title"><i class="fa-solid fa-calendar-days"></i> Time Window</div>
                      <div class="insight-text">Seven years of data (2018–2024) used for the 2025 benchmark edition.</div>
                    </div>
                    <div class="insight-card">
                      <div class="insight-title"><i class="fa-solid fa-comments-dollar"></i> Data Basis</div>
                      <div class="insight-text">Live recruitment-stage salary expectations, not static survey forms.</div>
                    </div>
                    <div class="insight-card">
                      <div class="insight-title"><i class="fa-solid fa-user-tie"></i> Seniority Criteria</div>
                      <div class="insight-text">Bands are classified by years of experience and role scope (Junior, Mid, Senior, Lead/Management).</div>
                    </div>
                  </div>
                </div>
                <div class="callout-info"><strong>Further reading:</strong> For full methodology and segment-level analysis, see <a href="#src-damia-2025" class="source-link">Damia 2025 salary benchmark</a>. Consider reviewing the full presentation before using benchmark figures for planning assumptions.</div>

                <!-- INE Earnings by Region -->
                <div class="ine-earnings-card" data-db="content" data-prompt-core="true">
                  <h4><i class="fa-solid fa-chart-bar" aria-hidden="true"></i> Average Monthly Earnings by Region (<a href="#src-ine" class="source-link">INE</a> 2023)</h4>
                  <div class="table-wrapper">
                    <table class="ine-table" aria-label="Average monthly earnings by region, 12× equivalent">
                      <thead>
                        <tr>
                          <th>NUTS II Region</th>
                          <th class="col-numeric" title="Lower than 1st cycle of primary education">Primary (€)</th>
                          <th class="col-numeric" title="Short-cycle professional course">Prof. Course (€)</th>
                          <th class="col-numeric" title="(Pre-Bologna) short-cycle tertiary course">Pre-Bologna (€)</th>
                          <th class="col-numeric" title="Bachelor's level">Bachelor (€)</th>
                          <th class="col-numeric" title="Master's level">Master (€)</th>
                          <th class="col-numeric" title="Bachelor earnings as % of G. Lisboa (official baseline input to the experimental salary index proxy)">% vs Lisbon</th>
                        </tr>
                      </thead>
                      <tbody id="ine-table-body">
                        <!-- Dynamically populated from COMPENSATION_DATA.json -->
                      </tbody>
                    </table>
                  </div>
                  <p class="scorecard-footer"><strong>Source:</strong> <a href="#src-ine" class="source-link">INE (2023)</a> — MTSSS/GEP Personnel Tables (Indicator 0012653), average gross monthly earnings (€) by NUTS 2024 and education level. Original 14× values converted to 12× monthly equivalent (×14/12 ≈ ×1.167). % vs Lisbon = Bachelor earnings ÷ G. Lisboa Bachelor — used as official baseline input to the experimental salary index proxy.</p>
                </div>

                <!-- Labor market callouts -->
                <div class="grid-2" data-db="content">
                  <div class="callout-warning">
                    <strong><i class="fa-solid fa-triangle-exclamation"></i> Talent Competition:</strong>
                    Lisbon and Porto face increasing competition from remote-first employers offering EU-level salaries. Retention pressure remains elevated in the most competitive hubs (<a href="#src-idc" class="source-link">EURES Portugal</a>).
                  </div>
                  <div class="callout-success">
                    <strong><i class="fa-solid fa-check-circle"></i> Workforce Quality:</strong>
                    Skills and education outcomes remain competitive in EU benchmarking (<a href="#src-efepi" class="source-link">EU Education Monitor</a>). Time zone: WET/WEST — same as UK, 1h behind CET. Cultural alignment with Western European business practices.
                  </div>
                </div>
              </div>

              <!-- Quality of Life & Security -->
              <div id="healthcare-safety" class="section-block" data-db="content">
                <h3><i class="fa-solid fa-heart-pulse" aria-hidden="true"></i> Quality of Life &amp; Security</h3>
                <div class="grid-2 grid-equal-height">
                  <div class="card card-flex" data-prompt-core="true">
                    <h4><i class="fa-solid fa-hospital" aria-hidden="true"></i> Healthcare System</h4>
                    <ul class="flex-fill">
                      <li id="qol-healthcare-public"><strong>Public (SNS):</strong> Universal coverage, free at point of use with small co-pays for consultations and prescriptions</li>
                      <li id="qol-healthcare-private"><strong>Private:</strong> €30–80/month — short wait times, English-speaking practitioners widely available</li>
                      <li id="qol-healthcare-ehci"><strong><a href="#src-ehci" class="source-link">EU State of Health Profile</a>:</strong> Country profile confirms universal SNS coverage with mixed public/private delivery model.</li>
                    </ul>
                  </div>
                  <div class="card card-flex" data-prompt-core="true">
                    <h4><i class="fa-solid fa-shield-halved" aria-hidden="true"></i> Safety &amp; Stability</h4>
                    <ul class="flex-fill">
                      <li id="qol-safety-gpi"><strong><a href="#src-eurostat" class="source-link">Eurostat indicators</a>:</strong> Portugal remains in the lower-risk cluster in EU comparison tables.</li>
                      <li id="qol-safety-crime"><strong>Crime:</strong> Among the lowest rates in the EU — Lisbon safer than most European capitals <a href="#src-eurostat" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                      <li id="qol-safety-political"><strong>Political:</strong> Stable democracy; EU member since 1986, NATO since 1949</li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Cost of Living -->
              <div id="cost-of-living" class="section-block" data-db="content">
                <h3><i class="fa-solid fa-cart-shopping" aria-hidden="true"></i> Cost of Living</h3>
                <div class="grid-auto-260">
                  <div class="stat-hero" id="col-hero-essentials" data-prompt-core="true">
                    <div class="stat-value">€669</div>
                    <div class="stat-label">Monthly essentials (single, outside Lisbon)</div>
                    <div class="stat-source"><a href="#src-numbeo" class="source-link">Numbeo 2024</a></div>
                  </div>
                  <div class="stat-hero" id="col-hero-utilities" data-prompt-core="true">
                    <div class="stat-value">€120–180€</div>
                    <div class="stat-label">Utilities (electricity, water, internet)</div>
                    <div class="stat-source"><a href="#src-numbeo" class="source-link">Numbeo 2024</a></div>
                  </div>
                  <div class="stat-hero" id="col-hero-comparison" data-prompt-core="true">
                    <div class="stat-value">30–65%</div>
                    <div class="stat-label">Cheaper than London/Amsterdam/Munich</div>
                    <div class="stat-source"><a href="#src-numbeo" class="source-link">Numbeo comparison</a></div>
                  </div>
                </div>
                <div class="callout-info">
                  <strong><i class="fa-solid fa-info-circle"></i> Note:</strong>
                  COL + Rent Index in the city database uses Numbeo's Cost of Living Plus Rent Index (Lisbon ≈ base reference with normalization adjustments). Cities without direct Numbeo data use regional estimates.
                </div>
              </div>

          </div>
        </div>
      </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  UNIVERSITY TALENT OUTPUT & FLOW                                        ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-talent" id="university-talent-flow">
      <summary class="deeper-dive-summary">
        <span class="section-number">4</span>
        <i class="fa-solid fa-graduation-cap section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">University Talent Output &amp; Flow</span>
        <span class="deeper-dive-subtitle">— Graduate data, D3 bubble chart, talent flows</span>
        <span class="section-confidence" data-section="universityTalent"></span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">

              <!-- D3 Bubble Chart: Talent vs Cost -->
              <div id="value-matrix" class="section-block">
                <h3><i class="fa-solid fa-crosshairs" aria-hidden="true"></i> Talent vs Cost Value Matrix</h3>
                <p>Interactive bubble chart: X-axis = Cost of Living Index, Y-axis = Tech STEM+ graduates/year, bubble size = ICT graduate share. Click any city for details.</p>
                <div id="d3-bubble-chart" class="d3-chart-container" data-db="master" role="img" aria-label="Interactive scatter plot comparing talent output versus cost of living for Portuguese cities">
                  <!-- D3.js renders the chart here -->
                </div>
              </div>

              <!-- Regional Talent Flows -->
              <div id="regional-talent-flows" class="section-block" data-db="content" data-prompt-core="true">
                <h3><i class="fa-solid fa-diagram-project" aria-hidden="true"></i> Regional Talent Flows</h3>
                <div class="grid-auto-260">
                  <div class="card">
                    <h4><i class="fa-solid fa-arrow-right-to-city"></i> Graduate Migration</h4>
                    <ul>
                      <li><strong>Lisbon pull:</strong> ~40% of Centro/Norte graduates relocate within 2 years <a href="#src-ine" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                      <li><strong>Porto pull:</strong> ~20% of Minho/Trás-os-Montes graduates <a href="#src-ine" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                      <li><strong>Retention challenge:</strong> Interior cities (Covilhã, Évora) lose ~60% of graduates <a href="#src-ine" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                    </ul>
                  </div>
                  <div class="card">
                    <h4><i class="fa-solid fa-rotate"></i> Remote Work Impact</h4>
                    <ul>
                      <li><strong>Post-COVID shift:</strong> ~23% of IT workers now fully remote (<a href="#src-ine" class="source-link">INE</a> 2024)</li>
                      <li><strong>Salary arbitrage:</strong> Lisbon-salary remote workers in Braga/Aveiro</li>
                      <li><strong>Reverse migration:</strong> Small but growing trend to university cities</li>
                    </ul>
                  </div>
                </div>
                <!-- Network Visualization: Regional Talent Flows -->
                <div id="network-viz" class="network-viz-container" data-db="master,content">
                  <h4><i class="fa-solid fa-diagram-project"></i> Talent Flow Network — Commuting & Migration Patterns</h4>
                  <p class="viz-subtitle">Interactive visualization showing graduate flows, commuting corridors, and talent movement between Portuguese cities. Colors match the Value Matrix quadrants.</p>
                        
                        <!-- Talent Flow SVG - Commuting & Migration Patterns -->
                        <svg viewBox="0 0 1000 770" class="talent-flow-svg" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Network diagram showing talent flows between Portuguese tech cities">
                            <!-- Gradients and Filters -->
                            <defs>
                                <!-- Quadrant-based color gradients - matching Value Matrix -->
                                <!-- YELLOW = High Cost / High Talent (Lisbon, Porto) -->
                                <linearGradient id="yellowGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#eab308"/>
                                    <stop offset="100%" style="stop-color:#fde047"/>
                                </linearGradient>
                                <linearGradient id="yellowGradDark" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#eab308"/>
                                    <stop offset="100%" style="stop-color:#fde047"/>
                                </linearGradient>
                                <!-- GREEN = Low Cost / High Talent (Coimbra, Aveiro, Braga, Guimarães) -->
                                <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#10b981"/>
                                    <stop offset="100%" style="stop-color:#6ee7b7"/>
                                </linearGradient>
                                <linearGradient id="greenGradDark" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#065f46"/>
                                    <stop offset="100%" style="stop-color:#047857"/>
                                </linearGradient>
                                <!-- ORANGE = Low Cost / Low Talent (Covilhã, Évora) -->
                                <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f97316"/>
                                    <stop offset="100%" style="stop-color:#fdba74"/>
                                </linearGradient>
                                <linearGradient id="orangeGradDark" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#9a3412"/>
                                    <stop offset="100%" style="stop-color:#c2410c"/>
                                </linearGradient>
                                <!-- BLUE = High Cost / Low Talent (Faro) -->
                                <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#3b82f6"/>
                                    <stop offset="100%" style="stop-color:#60a5fa"/>
                                </linearGradient>
                                <linearGradient id="blueGradDark" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1e3a8a"/>
                                    <stop offset="100%" style="stop-color:#1d4ed8"/>
                                </linearGradient>
                                
                                <!-- Arrow markers - Quadrant colors -->
                                <marker id="arrowYellow" markerWidth="12" markerHeight="12" refX="9" refY="4" orient="auto" markerUnits="strokeWidth">
                                    <path d="M0,0 L0,8 L11,4 z" fill="#eab308" fill-opacity="0.85"/>
                                </marker>
                                <marker id="arrowGreen" markerWidth="12" markerHeight="12" refX="9" refY="4" orient="auto" markerUnits="strokeWidth">
                                    <path d="M0,0 L0,8 L11,4 z" fill="#10b981" fill-opacity="0.85"/>
                                </marker>
                                <marker id="arrowOrange" markerWidth="12" markerHeight="12" refX="9" refY="4" orient="auto" markerUnits="strokeWidth">
                                    <path d="M0,0 L0,8 L11,4 z" fill="#f97316" fill-opacity="0.85"/>
                                </marker>
                                <marker id="arrowBlue" markerWidth="12" markerHeight="12" refX="9" refY="4" orient="auto" markerUnits="strokeWidth">
                                    <path d="M0,0 L0,8 L11,4 z" fill="#3b82f6" fill-opacity="0.8"/>
                                </marker>
                                
                                <!-- Filters -->
                                <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                                    <feDropShadow dx="0" dy="4" stdDeviation="5" flood-opacity="0.3"/>
                                </filter>
                                <filter id="shadowLg" x="-50%" y="-50%" width="200%" height="200%">
                                    <feDropShadow dx="0" dy="5" stdDeviation="7" flood-opacity="0.35"/>
                                </filter>
                                <filter id="shadowSm" x="-50%" y="-50%" width="200%" height="200%">
                                    <feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.25"/>
                                </filter>
                            </defs>
                            
                            <!-- Background region zones - Geographic clusters (neutral colors) -->
                            <!-- NORTH cluster (Porto, Braga, Guimarães) -->
                            <rect class="region-zone" x="25" y="40" width="310" height="300" rx="16" fill="#64748b" fill-opacity="0.06" stroke="#475569" stroke-width="2" stroke-opacity="0.3"/>
                            <!-- CENTRAL region (Aveiro, Coimbra) + Interior (Covilhã) -->
                            <rect class="region-zone" x="350" y="90" width="300" height="350" rx="16" fill="#64748b" fill-opacity="0.06" stroke="#475569" stroke-width="2" stroke-opacity="0.3"/>
                            <!-- CAPITAL region (Lisbon, Évora) -->
                            <rect class="region-zone" x="670" y="140" width="310" height="390" rx="16" fill="#64748b" fill-opacity="0.06" stroke="#475569" stroke-width="2" stroke-opacity="0.3"/>
                            <!-- ALGARVE (Faro) -->
                            <rect class="region-zone" x="760" y="590" width="240" height="170" rx="16" fill="#64748b" fill-opacity="0.06" stroke="#475569" stroke-width="2" stroke-opacity="0.3"/>
                            
                            <!-- Cluster Labels (neutral) -->
                            <text class="region-label" x="180" y="68" text-anchor="middle" fill="#64748b" font-size="14" font-weight="700" opacity="0.8">NORTH CLUSTER</text>
                            <text class="region-label" x="500" y="118" text-anchor="middle" fill="#64748b" font-size="14" font-weight="700" opacity="0.8">CENTRAL REGION</text>
                            <text class="region-label" x="825" y="170" text-anchor="middle" fill="#64748b" font-size="14" font-weight="700" opacity="0.8">LISBON &amp; ALENTEJO</text>
                            <text class="region-label" x="880" y="622" text-anchor="middle" fill="#64748b" font-size="13" font-weight="700" opacity="0.8">ALGARVE</text>
                            
                            <!-- ========== CONNECTIONS - Animated flow lines ========== -->
                            
                            <!-- NORTH CLUSTER: Triangle formation - Bidirectional (parallel offset ±4px perpendicular) -->
                            <!-- Braga (115,120) ↔ Guimarães (270,135): direction vector normalized, offset perpendicular -->
                            <path d="M 156 112 L 232 126" stroke="#10b981" stroke-width="2.5" stroke-opacity="0.85" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round"/>
                            <path d="M 228 138 L 152 124" stroke="#10b981" stroke-width="2.5" stroke-opacity="0.65" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round" style="animation-delay: 0.5s"/>
                            
                            <!-- Guimarães (270,135) ↔ Porto (250,255): vertical-ish -->
                            <path d="M 262 172 L 256 200" stroke="#eab308" stroke-width="2.5" stroke-opacity="0.85" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round"/>
                            <path d="M 248 200 L 254 172" stroke="#10b981" stroke-width="2.5" stroke-opacity="0.65" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round" style="animation-delay: 0.75s"/>
                            
                            <!-- Braga (115,120) ↔ Porto (250,255): diagonal -->
                            <path d="M 148 154 L 214 221" stroke="#eab308" stroke-width="2.5" stroke-opacity="0.85" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round"/>
                            <path d="M 206 229 L 140 162" stroke="#10b981" stroke-width="2.5" stroke-opacity="0.65" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round" style="animation-delay: 0.3s"/>
                            
                            <!-- COVILHÃ (445,210): University town - exports graduates (Orange = Low Cost/Low Talent) -->
                            <!-- Covilhã → Porto (graduates relocate) -->
                            <path d="M 415 215 L 305 240" stroke="#f97316" stroke-width="1.5" stroke-opacity="0.6" class="flow-animated" stroke-dasharray="6 5" stroke-linecap="round" style="animation-duration: 2.5s;"/>
                            <!-- Covilhã → Guimarães (fine brain drain) -->
                            <path d="M 420 200 L 300 150" stroke="#f97316" stroke-width="1" stroke-opacity="0.5" class="flow-animated" stroke-dasharray="5 4" stroke-linecap="round" style="animation-duration: 2.8s; animation-delay: 0.7s;"/>
                            <!-- Covilhã → Aveiro (brain drain) -->
                            <path d="M 445 240 L 435 360" stroke="#f97316" stroke-width="1.5" stroke-opacity="0.55" class="flow-animated" stroke-dasharray="6 5" stroke-linecap="round" style="animation-duration: 2.5s; animation-delay: 0.5s;"/>
                            <!-- Covilhã → Coimbra/Lisbon corridor -->
                            <path d="M 468 235 L 535 295" stroke="#f97316" stroke-width="1.5" stroke-opacity="0.6" class="flow-animated" stroke-dasharray="6 5" stroke-linecap="round" style="animation-duration: 2.5s; animation-delay: 0.3s;"/>
                            
                            <!-- PORTO (250,255) ↔ AVEIRO (430,385): bidirectional (North↔Central transition) -->
                            <path d="M 292 298 L 398 360" stroke="#10b981" stroke-width="2.5" stroke-opacity="0.75" class="flow-animated" stroke-dasharray="12 8" stroke-linecap="round"/>
                            <path d="M 390 368 L 284 306" stroke="#eab308" stroke-width="2.5" stroke-opacity="0.55" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round" style="animation-delay: 0.3s"/>
                            
                            <!-- AVEIRO (430,385) ↔ COIMBRA (570,330): bidirectional (Central cluster) -->
                            <path d="M 468 370 L 528 345" stroke="#10b981" stroke-width="2" stroke-opacity="0.65" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round"/>
                            <path d="M 525 355 L 465 380" stroke="#10b981" stroke-width="2" stroke-opacity="0.45" class="flow-animated" stroke-dasharray="8 6" stroke-linecap="round" style="animation-delay: 0.4s"/>
                            
                            <!-- COIMBRA (570,330) → LISBON (740,435): Talent export (Green→Yellow) -->
                            <path d="M 612 350 Q 670 400 690 420" fill="none" stroke="#eab308" stroke-width="3" stroke-opacity="0.75" class="flow-animated" stroke-dasharray="14 10" stroke-linecap="round"/>
                            <!-- LISBON (740,435) → COIMBRA (570,330): Reverse flow (remote/hybrid) -->
                            <path d="M 698 415 Q 665 385 620 355" fill="none" stroke="#10b981" stroke-width="1.5" stroke-opacity="0.4" class="flow-animated" stroke-dasharray="8 6" stroke-linecap="round" style="animation-delay: 0.6s;"/>
                            
                            <!-- COIMBRA (570,330) → PORTO (250,255): Talent export (Green→Yellow) -->
                            <path d="M 525 315 Q 410 270 298 255" fill="none" stroke="#eab308" stroke-width="2" stroke-opacity="0.6" class="flow-animated" stroke-dasharray="12 10" stroke-linecap="round"/>
                            
                            <!-- LISBON (740,435) ↔ ÉVORA (860,295): bidirectional (Yellow↔Orange) -->
                            <path d="M 830 320 L 782 410" stroke="#eab308" stroke-width="2.5" stroke-opacity="0.7" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round"/>
                            <path d="M 790 405 L 838 315" stroke="#eab308" stroke-width="1.5" stroke-opacity="0.4" class="flow-animated" stroke-dasharray="8 6" stroke-linecap="round" style="animation-delay: 0.5s;"/>
                            
                            <!-- LISBON (740,435) ↔ AVEIRO (430,385): asymmetric - Aveiro exports to Lisbon, some remote work back -->
                            <path d="M 472 395 Q 580 430 690 440" fill="none" stroke="#eab308" stroke-width="2" stroke-opacity="0.6" class="flow-animated" stroke-dasharray="10 8" stroke-linecap="round" style="animation-duration: 2s;"/>
                            <path d="M 695 425 Q 590 405 478 385" fill="none" stroke="#10b981" stroke-width="1.5" stroke-opacity="0.35" class="flow-animated" stroke-dasharray="8 6" stroke-linecap="round" style="animation-duration: 2s; animation-delay: 0.5s;"/>
                            
                            <!-- LISBON (740,435) ↔ FARO (880,680): Remote connection (Yellow↔Blue) -->
                            <path d="M 788 488 Q 850 590 865 640" fill="none" stroke="#3b82f6" stroke-width="1.5" stroke-opacity="0.6" class="flow-animated" stroke-dasharray="8 6" stroke-linecap="round" style="animation-duration: 2.5s;"/>
                            <path d="M 872 638 Q 858 588 795 485" fill="none" stroke="#eab308" stroke-width="1.5" stroke-opacity="0.45" class="flow-animated" stroke-dasharray="8 6" stroke-linecap="round" style="animation-duration: 2.5s; animation-delay: 0.4s;"/>
                            
                            <!-- FARO isolation indicator (Blue) -->
                            <circle cx="880" cy="680" r="52" fill="none" stroke="#3b82f6" stroke-width="1.5" stroke-opacity="0.3" stroke-dasharray="6 5"/>
                            
                            <!-- ========== CITY NODES - Quadrant Colors ========== -->
                            
                            <!-- Porto (large hub) - YELLOW (High Cost / High Talent) -->
                            <g transform="translate(250, 255)">
                                <circle r="58" fill="url(#yellowGradDark)" stroke="white" stroke-width="5" filter="url(#shadowLg)"/>
                                <text y="8" text-anchor="middle" fill="#422006" font-weight="700" font-size="20">PORTO</text>
                            </g>
                            
                            <!-- Braga - GREEN (Low Cost / High Talent) -->
                            <g transform="translate(115, 120)">
                                <circle r="44" fill="url(#greenGrad)" stroke="white" stroke-width="4" filter="url(#shadow)"/>
                                <text y="7" text-anchor="middle" fill="white" font-weight="700" font-size="16">BRAGA</text>
                            </g>
                            
                            <!-- Guimarães - GREEN (Low Cost / High Talent) -->
                            <g transform="translate(270, 135)">
                                <circle r="40" fill="url(#greenGrad)" stroke="white" stroke-width="4" filter="url(#shadow)"/>
                                <text y="-3" text-anchor="middle" fill="white" font-weight="700" font-size="11">GUIMA-</text>
                                <text y="12" text-anchor="middle" fill="white" font-weight="700" font-size="11">RÃES</text>
                            </g>
                            
                            <!-- Covilhã - ORANGE (Low Cost / Low Talent) -->
                            <g transform="translate(445, 210)">
                                <circle r="34" fill="url(#orangeGrad)" stroke="white" stroke-width="3" filter="url(#shadowSm)"/>
                                <text y="5" text-anchor="middle" fill="white" font-weight="700" font-size="12">COVILHÃ</text>
                            </g>
                            
                            <!-- Coimbra - GREEN (Low Cost / High Talent) -->
                            <g transform="translate(570, 330)">
                                <circle r="48" fill="url(#greenGrad)" stroke="white" stroke-width="4" filter="url(#shadow)"/>
                                <text y="7" text-anchor="middle" fill="white" font-weight="700" font-size="16">COIMBRA</text>
                            </g>
                            
                            <!-- Aveiro - GREEN (Low Cost / High Talent) -->
                            <g transform="translate(430, 385)">
                                <circle r="42" fill="url(#greenGrad)" stroke="white" stroke-width="4" filter="url(#shadow)"/>
                                <text y="7" text-anchor="middle" fill="white" font-weight="700" font-size="15">AVEIRO</text>
                            </g>
                            
                            <!-- Lisbon (largest) - YELLOW (High Cost / High Talent) -->
                            <g transform="translate(740, 435)">
                                <circle r="65" fill="url(#yellowGradDark)" stroke="white" stroke-width="5" filter="url(#shadowLg)"/>
                                <text y="9" text-anchor="middle" fill="#422006" font-weight="700" font-size="22">LISBON</text>
                            </g>

                            <!-- Setúbal - lighter yellow satellite tied to Lisbon spillover -->
                            <g transform="translate(845, 455)">
                                <circle r="40" fill="url(#yellowGrad)" stroke="white" stroke-width="4" filter="url(#shadow)"/>
                                <text y="6" text-anchor="middle" fill="#422006" font-weight="700" font-size="14">SETÚBAL</text>
                            </g>

                            <!-- Lisbon overspill droplets drawn above Setúbal -->
                            <g transform="translate(740, 435)">
                                <text x="58" y="9" font-size="16" text-anchor="middle" fill="#2563eb">💧💧</text>
                            </g>
                            
                            <!-- Évora - ORANGE (Low Cost / Low Talent) -->
                            <g transform="translate(860, 295)">
                                <circle r="32" fill="url(#orangeGrad)" stroke="white" stroke-width="3" filter="url(#shadowSm)"/>
                                <text y="6" text-anchor="middle" fill="white" font-weight="700" font-size="13">ÉVORA</text>
                            </g>
                            
                            <!-- Faro - BLUE (High Cost / Low Talent) -->
                            <g transform="translate(880, 680)">
                                <circle r="38" fill="url(#blueGrad)" stroke="white" stroke-width="4" filter="url(#shadow)"/>
                                <text y="7" text-anchor="middle" fill="white" font-weight="700" font-size="15">FARO</text>
                            </g>
                            
                            <!-- ========== FLOW ANNOTATIONS - Quadrant colors ========== -->
                            <!-- North Triangle commute times (Green for the green cities) -->
                            <text class="flow-annotation" x="200" y="100" text-anchor="middle" fill="#059669" font-size="11" font-weight="600" opacity="0.95">~25 min</text>
                            <text class="flow-annotation" x="160" y="195" text-anchor="middle" fill="#a16207" font-size="11" font-weight="600" opacity="0.95">~45 min</text>
                            <text class="flow-annotation" x="280" y="202" text-anchor="middle" fill="#a16207" font-size="11" font-weight="600" opacity="0.95">~50 min</text>
                            
                            <!-- Porto-Aveiro commute (Green) -->
                            <text class="flow-annotation" x="325" y="345" text-anchor="middle" fill="#059669" font-size="12" font-weight="600" opacity="0.95">~55 min</text>
                            <!-- Aveiro-Coimbra commute (Green) -->
                            <text class="flow-annotation" x="520" y="380" text-anchor="middle" fill="#059669" font-size="11" font-weight="600" opacity="0.9">~50 min</text>
                            
                            <!-- Graduate relocation paths (Orange) -->
                            <text class="flow-annotation" x="400" y="282" text-anchor="middle" fill="#c2410c" font-size="11" font-style="italic" font-weight="500" opacity="0.85">← relocate ~2h</text>
                            
                            <!-- Lisbon-Coimbra commute (Yellow/Green bidirectional) -->
                            <text class="flow-annotation" x="670" y="380" text-anchor="middle" fill="#a16207" font-size="11" font-weight="600" opacity="0.9">~2h</text>
                            
                            <!-- Covilhã brain drain times -->
                            <text class="flow-annotation" x="365" y="222" text-anchor="middle" fill="#c2410c" font-size="9" font-weight="500" opacity="0.8">~2h 30m</text>
                            <text class="flow-annotation" x="350" y="168" text-anchor="middle" fill="#c2410c" font-size="9" font-weight="500" opacity="0.8">~2h 45m</text>
                            <text class="flow-annotation" x="425" y="298" text-anchor="middle" fill="#c2410c" font-size="9" font-weight="500" opacity="0.8">~2h</text>
                            <text class="flow-annotation" x="505" y="258" text-anchor="middle" fill="#c2410c" font-size="9" font-weight="500" opacity="0.8">~1h 45m</text>
                            
                            <!-- Lisbon-Évora commute (Orange) -->
                            <text class="flow-annotation" x="800" y="365" text-anchor="middle" fill="#c2410c" font-size="11" font-weight="600" opacity="0.9">~1h 30m</text>
                            
                            <!-- Lisbon-Aveiro annotation -->
                            <text class="flow-annotation" x="580" y="450" text-anchor="middle" fill="#a16207" font-size="10" font-style="italic" font-weight="500" opacity="0.8">~2h 30m / hybrid</text>
                            
                            <!-- Faro connection annotation (Blue) -->
                            <text class="flow-annotation" x="875" y="545" text-anchor="middle" fill="#2563eb" font-size="11" font-style="italic" font-weight="500" opacity="0.85">~2h 45m / remote</text>
                            
                            <!-- ========== CONTEXTUAL COMMENTARY - Outside region boxes ========== -->
                            
                            <!-- North Cluster Commentary -->
                            <text x="20" y="360" fill="#64748b" font-size="11" font-weight="500" opacity="0.9">
                                <tspan x="20" dy="0">UMinho (Braga/Guimarães)</tspan>
                                <tspan x="20" dy="14">& FEUP (Porto) grads feed</tspan>
                                <tspan x="20" dy="14">the same recruiter pool.</tspan>
                                <tspan x="20" dy="14">~30 min commute enables</tspan>
                                <tspan x="20" dy="14">daily cross-city work.</tspan>
                            </text>
                            
                            <!-- Central Region Commentary -->
                            <text x="355" y="455" fill="#64748b" font-size="11" font-weight="500" opacity="0.9">
                                <tspan x="355" dy="0">Aveiro tilts Porto (~45 min);</tspan>
                                <tspan x="355" dy="14">Coimbra exports grads to</tspan>
                                <tspan x="355" dy="14">both hubs (1h+ commute</tspan>
                                <tspan x="355" dy="14">limits daily sharing).</tspan>
                            </text>
                            
                            <!-- Interior/Covilhã Commentary -->
                            <text x="450" y="140" fill="#c2410c" font-size="10" font-style="italic" font-weight="500" opacity="0.85">
                                <tspan x="450" dy="0">UBI (Covilhã) brain drain:</tspan>
                                <tspan x="450" dy="13">Strong CS/engineering grads</tspan>
                                <tspan x="450" dy="13">relocate to coastal cities</tspan>
                                <tspan x="450" dy="13">due to limited local demand</tspan>
                            </text>
                            
                            <!-- Lisbon Gravity Commentary -->
                            <text x="680" y="545" fill="#64748b" font-size="11" font-weight="500" opacity="0.9">
                                <tspan x="680" dy="0">Lisbon pulls from all regions.</tspan>
                                <tspan x="680" dy="14">Évora: ~1h15m hybrid commute,</tspan>
                                <tspan x="680" dy="14">lower CoL attracts remote workers</tspan>
                            </text>

                            <!-- Lisbon–Setúbal Spillover Commentary (compact, right of Lisbon) -->
                            <text x="820" y="391" fill="#422006" font-size="10" font-style="italic" font-weight="600" opacity="0.95">
                                <tspan x="820" dy="0">Setúbal shares Lisbon's metro labour pool,</tspan>
                                <tspan x="820" dy="13">with daily bridge &amp; rail commuting</tspan>
                                <tspan x="820" dy="13">feeding industrial, logistics &amp;</tspan>
                                <tspan x="820" dy="13">back-office overspill from the capital.</tspan>
                            </text>
                            
                            <!-- Faro Isolation Commentary -->
                            <text x="650" y="630" fill="#2563eb" font-size="10" font-style="italic" font-weight="500" opacity="0.85">
                                <tspan x="650" dy="0">Isolated from mainland hubs:</tspan>
                                <tspan x="650" dy="13">Digital nomad & expat pool,</tspan>
                                <tspan x="650" dy="13">remote-first hiring only</tspan>
                            </text>
                            
                            <!-- Flow Direction Key (inline, top-right) -->
                            <g transform="translate(760, 40)">
                                <text x="0" y="0" fill="#475569" font-size="10" font-weight="700" opacity="0.8">FLOW KEY:</text>
                                <line x1="0" y1="12" x2="30" y2="12" stroke="#eab308" stroke-width="2.5" stroke-dasharray="6 4" stroke-linecap="round" stroke-opacity="0.8"/>
                                <text x="35" y="16" fill="#a16207" font-size="9" font-weight="500">→ Talent flows to hubs</text>
                                <line x1="0" y1="28" x2="30" y2="28" stroke="#10b981" stroke-width="2" stroke-dasharray="6 4" stroke-linecap="round" stroke-opacity="0.7"/>
                                <text x="35" y="32" fill="#059669" font-size="9" font-weight="500">↔ Bidirectional sharing</text>
                                <line x1="0" y1="44" x2="30" y2="44" stroke="#f97316" stroke-width="1.5" stroke-dasharray="5 4" stroke-linecap="round" stroke-opacity="0.6"/>
                                <text x="35" y="48" fill="#c2410c" font-size="9" font-weight="500">→ Brain drain export</text>
                            </g>
                            
                        </svg>

                </div>
              </div>

          </div>
        </div>
      </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  WORKFORCE TALENT POOLS                                                 ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-workforce" id="workforce-talent-pools">
      <summary class="deeper-dive-summary">
        <span class="section-number">5</span>
        <i class="fa-solid fa-users section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">Workforce Talent Pools</span>
        <span class="deeper-dive-subtitle">— IT professionals, city breakdown, hiring insights</span>
        <span class="section-confidence" data-section="workforce"></span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">

        <!-- Workforce Intro -->
        <div class="workforce-intro" data-db="content" data-prompt-core="true">
                <div class="grid-auto-180">
                  <div class="stat-hero" id="wf-hero-total">
                    <div class="stat-value">~164,000</div>
                    <div class="stat-label">Total IT Professionals</div>
                    <div class="stat-source"><a href="#src-eurostat-workforce" class="source-link">Eurostat ICT workforce tables</a></div>
                  </div>
                  <div class="stat-hero" id="wf-hero-concentration">
                    <div class="stat-value">72%</div>
                    <div class="stat-label">Lisbon + Porto Concentration</div>
                    <div class="stat-source"><a href="#src-eurostat-workforce" class="source-link">Eurostat ICT workforce tables</a></div>
                  </div>
                  <div class="stat-hero" id="wf-hero-growth">
                    <div class="stat-value">~8.5%</div>
                    <div class="stat-label">Annual Growth Rate</div>
                    <div class="stat-source"><a href="#src-eurostat-workforce" class="source-link">Eurostat ICT workforce tables</a></div>
                  </div>
                </div>
              </div>

              <!-- City Breakdown -->
              <div class="card">
                <h4><i class="fa-solid fa-building-user"></i> IT Workforce by City (2024 est.)</h4>
                <div class="bar-chart-container" id="workforce-bar-chart" data-db="content" data-prompt-core="true">
                  <div class="bar-chart-row">
                    <div class="bar-chart-header">
                      <span class="bar-chart-label">Lisbon</span>
                      <span class="bar-chart-value">~82,000 (50%)</span>
                    </div>
                    <div class="bar-chart-track"><div class="bar-chart-fill bar-chart-fill-accent" data-width="100"></div></div>
                  </div>
                  <div class="bar-chart-row">
                    <div class="bar-chart-header">
                      <span class="bar-chart-label">Porto</span>
                      <span class="bar-chart-value">~36,000 (22%)</span>
                    </div>
                    <div class="bar-chart-track"><div class="bar-chart-fill bar-chart-fill-accent" data-width="43.9"></div></div>
                  </div>
                  <div class="bar-chart-row">
                    <div class="bar-chart-header">
                      <span class="bar-chart-label">Braga</span>
                      <span class="bar-chart-value">~11,500 (7%)</span>
                    </div>
                    <div class="bar-chart-track"><div class="bar-chart-fill bar-chart-fill-success" data-width="14"></div></div>
                  </div>
                  <div class="bar-chart-row">
                    <div class="bar-chart-header">
                      <span class="bar-chart-label">Coimbra</span>
                      <span class="bar-chart-value">~8,200 (5%)</span>
                    </div>
                    <div class="bar-chart-track"><div class="bar-chart-fill bar-chart-fill-success" data-width="10"></div></div>
                  </div>
                  <div class="bar-chart-row">
                    <div class="bar-chart-header">
                      <span class="bar-chart-label">Aveiro</span>
                      <span class="bar-chart-value">~6,600 (4%)</span>
                    </div>
                    <div class="bar-chart-track"><div class="bar-chart-fill bar-chart-fill-warning" data-width="8"></div></div>
                  </div>
                  <div class="bar-chart-row">
                    <div class="bar-chart-header">
                      <span class="bar-chart-label">Other 15 Cities</span>
                      <span class="bar-chart-value">~19,700 (12%)</span>
                    </div>
                    <div class="bar-chart-track"><div class="bar-chart-fill bar-chart-fill-muted" data-width="24"></div></div>
                  </div>
                </div>
              </div>

              <!-- EU Context -->
              <div class="card" data-db="content">
                <h3><i class="fa-solid fa-earth-europe"></i> EU Context: ICT Specialists</h3>
                <div class="grid-2">
                  <div id="eu-context-position" data-prompt-core="true">
                    <p><strong>Portugal's Position:</strong></p>
                    <ul>
                      <li><strong>ICT specialists as % of employment:</strong> 5.2% (2024) — EU avg 5.0% <a href="#src-eurostat" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                      <li><strong>ICT graduates as % of all graduates:</strong> 3.8% — EU avg 4.2% <a href="#src-eu-monitor" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                      <li><strong>Female ICT specialists:</strong> 22.7% — EU avg 19.4% <a href="#src-eurostat" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                      <li><strong>Trend:</strong> Growing faster than EU average (+12% since 2020) <a href="#src-eurostat" class="source-link"><i class="fa-solid fa-circle-info"></i></a></li>
                    </ul>
                  </div>
                  <div id="eu-context-benchmarks">
                    <p><strong>Competitive Benchmarks:</strong></p>
                    <ul>
                      <li><strong>Romania:</strong> Similar costs, larger pool, higher attrition</li>
                      <li><strong>Poland:</strong> Larger pool (~500k), 30-40% higher salaries</li>
                      <li><strong>Spain:</strong> ~3× larger pool, similar salaries, less English fluency</li>
                      <li><strong>Portugal advantage:</strong> English, time zone, cultural fit, stability</li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Hiring Insights -->
              <div class="card" data-db="content">
                <h3><i class="fa-solid fa-magnifying-glass-chart"></i> Hiring Insights</h3>
                <div class="grid-auto-260">
                  <div class="insight-card" id="hiring-time" data-prompt-core="true">
                    <div class="insight-title"><i class="fa-solid fa-clock"></i> Time to Hire</div>
                    <div class="insight-text">Average 4-6 weeks for mid-level roles. Senior/niche roles: 8-12 weeks. Lisbon most competitive. <a href="#src-idc" class="source-link"><i class="fa-solid fa-circle-info"></i></a></div>
                  </div>
                  <div class="insight-card" id="hiring-education" data-prompt-core="true">
                    <div class="insight-title"><i class="fa-solid fa-user-graduate"></i> Education Level</div>
                    <div class="insight-text">78% of IT workforce holds bachelor's or higher. 15% have master's/PhD. CTeSP growing as entry path. <a href="#src-idc" class="source-link"><i class="fa-solid fa-circle-info"></i></a></div>
                  </div>
                  <div class="insight-card" id="hiring-age" data-prompt-core="true">
                    <div class="insight-title"><i class="fa-solid fa-users-between-lines"></i> Age Distribution</div>
                    <div class="insight-text">Median age 32. Under-35 segment: 58% of IT workforce. Fresh graduate pipeline: strong. <a href="#src-idc" class="source-link"><i class="fa-solid fa-circle-info"></i></a></div>
                  </div>
                  <div class="insight-card" id="hiring-retention" data-prompt-core="true">
                    <div class="insight-title"><i class="fa-solid fa-arrow-right-arrow-left"></i> Retention</div>
                    <div class="insight-text">Average tenure: 2.1 years (Lisbon), 2.8 years (Porto), 3.5+ years (secondary cities). Remote offers increasing churn. <a href="#src-idc" class="source-link"><i class="fa-solid fa-circle-info"></i></a></div>
                  </div>
                </div>
              </div>

          </div>
        </div>
      </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  CITY PROFILES                                                          ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-cities" id="city-profiles">
        <summary class="deeper-dive-summary">
          <span class="section-number">6</span>
          <i class="fa-solid fa-city section-icon" aria-hidden="true"></i>
          <span class="deeper-dive-title">City Profiles</span>
          <span class="deeper-dive-subtitle">— 10 detailed profiles: universities, companies, talent pools, cost structures</span>
          <span class="section-confidence" data-section="cityProfiles"></span>
          <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
        </summary>
        <div class="deeper-dive-content">
          <div id="city-profiles-content" data-db="profiles,master">
            <!-- Dynamically rendered from CITY_PROFILES.json by cityProfiles.js -->
          </div>
        </div>
      </details>
    

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  AI NEARSHORING SIMULATOR                                               ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <details class="deeper-dive-container section-simulator" id="ai-simulator">
      <summary class="deeper-dive-summary">
        <span class="section-number">7</span>
        <i class="fa-solid fa-wand-magic-sparkles section-icon" aria-hidden="true"></i>
        <span class="deeper-dive-title">AI Nearshoring Simulator Portugal <span class="badge-beta">Experimental v3</span></span>
        <span class="deeper-dive-subtitle">— Generate a custom nearshoring analysis and prompt package</span>
        <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
      </summary>
      <div class="deeper-dive-content">
      <p>Generate a custom nearshoring analysis from real city data. Fill in your requirements, get pre-computed rankings and financial projections, then paste the generated prompt into ChatGPT, Claude, or any LLM for expert narrative analysis.</p>

      <!-- How It Works — Collapsible -->
      <details class="deeper-dive-container simulator-how-it-works">
        <summary class="deeper-dive-summary">
          <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
          <span class="deeper-dive-title">How This Simulator Works</span>
          <span class="deeper-dive-subtitle">— Click to learn more</span>
          <i class="fa-solid fa-chevron-down deeper-dive-chevron" aria-hidden="true"></i>
        </summary>
        <div class="deeper-dive-content">
          <p><strong>Problems observed when "normally" prompting LLMs regarding nearshoring locations in Portugal:</strong> General-purpose models can use stale/unreliable sources and outdated data, introduce math mistakes, and seem to take shortcuts to default cities instead of deeply evaluating all 20 cities for users custom input request.</p>
          <p><strong>Experimental idea:</strong> Compute financials and ranking logic deterministically in JavaScript from normalized databases, then pass the computed package to the LLM for advisory interpretation.</p>
          <p><strong>Assumptions:</strong></p>
          <ul>
            <li>Database values are authoritative at generation time.</li>
            <li>Financial math and ranking logic run before LLM interpretation.</li>
            <li>The LLM is used for reasoning/trade-off narrative, not core arithmetic.</li>
            <li>Final operational decisions require independent validation.</li>
          </ul>
          <p><strong>How it works:</strong></p>
          <ol class="simulator-workflow">
            <li>User inputs project data (team, budget, roles, work model, constraints, priorities).</li>
            <li>JavaScript loads normalized city/cost/talent/compensation data.</li>
            <li>JavaScript computes deterministic financials, weighted scores, penalties, and feasibility.</li>
            <li>Prompt is generated by merging inputs, computed outputs, database facts, and advisor instructions.</li>
            <li>LLM interprets the package and returns recommendations plus trade-offs.</li>
            <li>User iterates with follow-up scenarios and budget sensitivity checks.</li>
            <li>Team validates decisions independently before execution.</li>
          </ol>
        </div>
      </details>

      <form id="simulator-form" class="simulator-form">

        <!-- ═══ SECTION 1: PROJECT OVERVIEW ═══ -->
        <div class="simulator-section">
          <h3 class="simulator-section-title"><i class="fa-solid fa-rocket" aria-hidden="true"></i> Project Overview</h3>
          <div class="simulator-grid">
            <div class="simulator-field simulator-field-full">
              <label for="sim-purpose"><i class="fa-solid fa-bullseye" aria-hidden="true"></i> What do you want to build?</label>
              <textarea id="sim-purpose" name="purpose" rows="2" maxlength="600" spellcheck="false" placeholder="Build a nearshore engineering hub for cloud platform development. Extend our German team with Portuguese talent for cost efficiency."></textarea>
              <span class="simulator-hint">Describe the team function: R&amp;D lab, product squad, DevOps center, support hub, etc.</span>
            </div>

            <div class="simulator-field">
              <label for="sim-company-focus"><i class="fa-solid fa-building" aria-hidden="true"></i> Your Industry &amp; Ecosystem Fit</label>
              <select id="sim-company-focus" name="companyFocus">
                <option value="">No specific industry / General tech</option>
                <option value="automotive">Automotive &amp; Mobility (VW, BMW, Bosch)</option>
                <option value="fintech">Fintech &amp; Banking (payments, credit tech)</option>
                <option value="enterprise-software">Enterprise Software &amp; SaaS (Microsoft, SAP)</option>
                <option value="cloud-services">Cloud Services &amp; Infrastructure</option>
                <option value="biotech-pharma">Biotech, Pharma &amp; Life Sciences</option>
                <option value="ai-ml">AI, ML &amp; Data Science</option>
                <option value="gaming">Gaming &amp; Interactive Media</option>
                <option value="industrial-iot">Industrial IoT &amp; Manufacturing Tech</option>
                <option value="telecommunications">Telecommunications &amp; 5G</option>
                <option value="aerospace-defense">Aerospace &amp; Defense</option>
                <option value="agritech-cleantech">Agritech &amp; Cleantech</option>
                <option value="startup-general">Startup (General / Early Stage)</option>
                <option value="ecommerce-retail">E-commerce &amp; Retail Tech</option>
              </select>
              <span class="simulator-hint">Matches cities with relevant industry clusters and R&amp;D centers</span>
            </div>

            <div class="simulator-field">
              <label for="sim-timezone"><i class="fa-solid fa-globe" aria-hidden="true"></i> HQ Location / Timezone</label>
              <input type="text" id="sim-timezone" name="timezone" placeholder="CET (Frankfurt, Germany)" maxlength="120" autocomplete="off" spellcheck="false">
              <span class="simulator-hint">Portugal is WET (UTC+0), 1h behind CET</span>
            </div>

            <div class="simulator-field">
              <label for="sim-timeline"><i class="fa-solid fa-clock" aria-hidden="true"></i> Hiring Timeline</label>
              <select id="sim-timeline" name="timeline">
                <option value="asap">ASAP (1–2 months)</option>
                <option value="3-6months">3–6 months</option>
                <option value="6-12months" selected>6–12 months</option>
                <option value="flexible">Flexible / No rush</option>
              </select>
            </div>

            <div class="simulator-field">
              <label for="sim-primary-objective"><i class="fa-solid fa-crosshairs" aria-hidden="true"></i> Primary Objective</label>
              <select id="sim-primary-objective" name="primaryObjective">
                <option value="cost">Cost optimization</option>
                <option value="quality">Talent quality first</option>
                <option value="speed">Speed to hire</option>
                <option value="balanced" selected>Balanced approach</option>
              </select>
              <span class="simulator-hint">This shapes which cities get recommended</span>
            </div>
          </div>
        </div>

        <!-- ═══ SECTION 2: BUDGET & SCALE ═══ -->
        <div class="simulator-section">
          <h3 class="simulator-section-title"><i class="fa-solid fa-coins" aria-hidden="true"></i> Budget &amp; Scale</h3>
          <div class="simulator-grid">
            <div class="simulator-field">
              <label for="sim-opex-budget"><i class="fa-solid fa-repeat" aria-hidden="true"></i> Monthly OpEx Budget</label>
              <input type="text" id="sim-opex-budget" name="opexBudget" placeholder="55000" inputmode="numeric" pattern="[0-9.,\s€]+" maxlength="20" autocomplete="off" title="Use numbers only (example: 55000)">
              <span class="simulator-hint">Monthly total budget. Accepts 55000 / 55,000 / 55.000 and auto-normalizes.</span>
            </div>

            <div class="simulator-field">
              <label for="sim-capex-budget"><i class="fa-solid fa-hammer" aria-hidden="true"></i> Setup CapEx Budget</label>
              <input type="text" id="sim-capex-budget" name="capexBudget" placeholder="50000" inputmode="numeric" pattern="[0-9.,\s€]+" maxlength="20" autocomplete="off" title="Use numbers only (example: 50000)">
              <span class="simulator-hint">One-time setup costs (equipment, legal, recruitment). Auto-normalized to integer.</span>
            </div>

            <div class="simulator-field">
              <label for="sim-team-size"><i class="fa-solid fa-users" aria-hidden="true"></i> Target Team Size</label>
              <input type="text" id="sim-team-size" name="teamSize" placeholder="10" inputmode="numeric" pattern=".*\d+.*" maxlength="20" autocomplete="off" title="Must contain at least one number">
              <span class="simulator-hint">Base hiring size as integer. If you type a range, first value is used.</span>
            </div>

            <div class="simulator-field">
              <label for="sim-scaling"><i class="fa-solid fa-chart-line" aria-hidden="true"></i> Growth Trajectory</label>
              <select id="sim-scaling" name="scaling">
                <option value="stable">Stable — maintain current size</option>
                <option value="gradual" selected>Gradual — +25-50% over 2 years</option>
                <option value="double">Double — 2× team size in 18 months</option>
                <option value="aggressive">Aggressive — 3×+ within 2 years</option>
                <option value="hub-build">Hub build-out — plan for 50+ eventually</option>
                <option value="flexible">Flexible — scale up/down as needed</option>
              </select>
              <span class="simulator-hint">Relative to your target team size above</span>
            </div>
          </div>
        </div>

        <!-- ═══ SECTION 3: TECH AND CANDIDATE REQUIREMENTS ═══ -->
        <div class="simulator-section">
          <h3 class="simulator-section-title"><i class="fa-solid fa-code" aria-hidden="true"></i> Tech and Candidate Requirements</h3>
          <div class="simulator-grid">
            <div class="simulator-field simulator-field-full">
              <label><i class="fa-solid fa-magnifying-glass" aria-hidden="true"></i> Roles &amp; Skills Needed</label>
              <div class="checkbox-grid">
                <label class="checkbox-label"><input type="checkbox" name="stack" value="React"> React</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Angular"> Angular</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Vue"> Vue.js</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Node.js"> Node.js</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Python"> Python</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Java"> Java</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value=".NET"> .NET/C#</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Go"> Go</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="AWS"> AWS</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Azure"> Azure</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="GCP"> GCP</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Kubernetes"> Kubernetes</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Docker"> Docker</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="PostgreSQL"> PostgreSQL</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="MongoDB"> MongoDB</label>
                <label class="checkbox-label"><input type="checkbox" name="stack" value="Redis"> Redis</label>
              </div>
              <input type="text" id="sim-searched-stack-other" name="searchedStackOther" placeholder="Other roles/skills (e.g., DevOps, ML Engineers, Terraform, Rust...)" maxlength="180" autocomplete="off" spellcheck="false">
              <span class="simulator-hint">Select technologies and add specific roles you're hiring for</span>
            </div>

            <div class="simulator-field simulator-field-full">
              <label for="sim-role-type-group"><i class="fa-solid fa-user-tag" aria-hidden="true"></i> Role Type</label>
              <div id="sim-role-type-group" class="checkbox-grid" role="group" aria-label="Role Type selection">
                <!-- Dynamically populated from salary table roles (WEBSITE_CONTENT.json) -->
              </div>
              <span class="simulator-hint">Affects talent pool relevance and salary estimates</span>
            </div>

            <div class="simulator-field simulator-field-full">
              <label for="sim-dealbreakers"><i class="fa-solid fa-ban" aria-hidden="true"></i> Deal Breakers <span class="simulator-hint">(optional)</span></label>
              <input type="text" id="sim-dealbreakers" name="dealbreakers" placeholder="Must have direct airport, need coworking space, English proficiency required" maxlength="260" autocomplete="off" spellcheck="false">
              <span class="simulator-hint">Hard requirements that eliminate cities from consideration</span>
            </div>
          </div>
        </div>

        <!-- ═══ SECTION 4: WORK ENVIRONMENT ═══ -->
        <div class="simulator-section">
          <h3 class="simulator-section-title"><i class="fa-solid fa-building-user" aria-hidden="true"></i> Work Environment</h3>
          <div class="simulator-grid">
            <div class="simulator-field">
              <label for="sim-work-model"><i class="fa-solid fa-laptop-house" aria-hidden="true"></i> Work Model</label>
              <select id="sim-work-model" name="workModel">
                <option value="fully-remote">Fully Remote (no office)</option>
                <option value="remote-first">Remote-First (optional coworking)</option>
                <option value="hybrid" selected>Hybrid (2-3 days office)</option>
                <option value="office-first">Office-First (mostly onsite)</option>
                <option value="fully-onsite">Fully Onsite</option>
              </select>
              <span class="simulator-hint">Affects office costs and city viability</span>
            </div>

            <div class="simulator-field" id="office-quality-field">
              <label for="sim-office-quality"><i class="fa-solid fa-star-half-stroke" aria-hidden="true"></i> Office Quality</label>
              <select id="sim-office-quality" name="officeQuality">
                <option value="budget">Budget — functional is fine</option>
                <option value="standard" selected>Standard — decent &amp; professional</option>
                <option value="premium">Premium — impress clients</option>
              </select>
              <span class="simulator-hint">Affects rent estimates (our data = standard quality)</span>
            </div>

            <div class="simulator-field" id="office-strategy-field">
              <label for="sim-office-strategy"><i class="fa-solid fa-location-dot" aria-hidden="true"></i> Office Strategy</label>
              <select id="sim-office-strategy" name="officeStrategy">
                <option value="city-center" selected>City center — visibility, networking, talent magnet</option>
                <option value="business-park">Business park — larger space, parking, lower rent</option>
                <option value="university-adjacent">University-adjacent — close to talent source</option>
                <option value="low-profile">Low-profile — quiet, cost-efficient, less visibility</option>
                <option value="no-preference">No preference</option>
              </select>
              <span class="simulator-hint">Impacts rent, employer branding, and commute appeal</span>
            </div>

            <div class="simulator-field">
              <label for="sim-hiring-strategy"><i class="fa-solid fa-user-graduate" aria-hidden="true"></i> Team Culture &amp; Hiring Strategy</label>
              <select id="sim-hiring-strategy" name="hiringStrategy">
                <option value="balanced-practical" selected>Balanced &amp; Practical — mixed seniority, motivation matters</option>
                <option value="specialized-research">Specialized &amp; R&amp;D-focused — MSc/PhD, deep expertise, research culture</option>
                <option value="practical-delivery">Practical &amp; Delivery-focused — bootcamp OK, ship fast, results-driven</option>
                <option value="senior-qol">Senior &amp; High QoL — experienced talent, work-life balance priority</option>
                <option value="junior-trainable">Junior &amp; Trainable — fresh grads, willing to invest in training</option>
              </select>
              <span class="simulator-hint">Affects talent pool targeting and city recommendations</span>
            </div>

            <div class="simulator-field">
              <label for="sim-entity"><i class="fa-solid fa-file-contract" aria-hidden="true"></i> Entity Structure</label>
              <select id="sim-entity" name="entity">
                <option value="undecided" selected>Not sure yet</option>
                <option value="eor">EoR (Employer of Record)</option>
                <option value="subsidiary">Own subsidiary</option>
                <option value="contractors">Contractors first</option>
              </select>
            </div>
          </div>
        </div>

        <!-- ═══ SECTION 5: PREFERENCES ═══ -->
        <div class="simulator-section">
          <h3 class="simulator-section-title"><i class="fa-solid fa-sliders" aria-hidden="true"></i> Preferences &amp; Output</h3>
          <div class="simulator-grid">
            <div class="simulator-field">
              <label for="sim-lifestyle"><i class="fa-solid fa-map-location-dot" aria-hidden="true"></i> Location &amp; Lifestyle</label>
              <select id="sim-lifestyle" name="lifestyle">
                <option value="any" selected>No preference</option>
                <option value="major-metro">Major metro / capital city</option>
                <option value="secondary-city">Secondary city / mid-size</option>
                <option value="coastal-warm">Coastal &amp; warm climate</option>
                <option value="university-town">University town atmosphere</option>
                <option value="low-cost">Low cost priority</option>
                <option value="nature-outdoor">Nature &amp; outdoor access</option>
              </select>
              <span class="simulator-hint">Affects city ranking and QoL factors</span>
            </div>

            <div class="simulator-field">
              <label for="sim-output-style"><i class="fa-solid fa-file-lines" aria-hidden="true"></i> Output Length</label>
              <select id="sim-output-style" name="outputStyle">
                <option value="executive">Short (~1,000 words)</option>
                <option value="detailed" selected>Detailed (~2,000 words)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="simulator-actions">
          <button type="button" id="generate-prompt-btn" class="simulator-btn-generate">
            <i class="fa-solid fa-wand-magic-sparkles" aria-hidden="true"></i>
            <span>Generate Simulation Deep Prompt</span>
          </button>
        </div>
      </form>

      <!-- Output -->
      <div class="prompt-output-wrapper">
        <div class="prompt-output-container">
          <div class="prompt-output-header">
            <span class="prompt-output-badge">DEEP PROMPT</span>
            <button type="button" id="copy-prompt-btn" class="btn-copy-prompt" disabled title="Copy to clipboard">
              <i class="fa-solid fa-copy" aria-hidden="true"></i> Copy
            </button>
          </div>
          <pre class="prompt-output-text" id="simulator-output"></pre>
        </div>
        <p class="prompt-output-note"><i class="fa-solid fa-circle-info"></i> Click 'Generate Simulation Deep Prompt', then copy and paste into your preferred AI engine.</p>
      </div>

      <!-- AI Links -->
      <div class="simulator-ai-links">
        <span class="ai-links-label"><i class="fa-solid fa-rocket"></i> Recommended AI engines for this prompt:</span>
        <div class="ai-links-grid">
          <a href="https://chat.openai.com/" target="_blank" rel="noopener noreferrer" class="ai-link-card ai-link-chatgpt">
            <strong>ChatGPT</strong>
            <span>GPT-5 Research Mode</span>
          </a>
          <a href="https://claude.ai/" target="_blank" rel="noopener noreferrer" class="ai-link-card ai-link-claude">
            <strong>Claude</strong>
            <span>Sonnet 4.5</span>
          </a>
          <a href="https://www.perplexity.ai/" target="_blank" rel="noopener noreferrer" class="ai-link-card ai-link-perplexity">
            <strong>Perplexity</strong>
            <span>Deep Research</span>
          </a>
        </div>
      </div>
      </div>
    </details>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  PUBLICATION NOTES                                                      ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <section id="publication-notes" class="intro-block section-notes">
      <h2><i class="fa-solid fa-scale-balanced" aria-hidden="true"></i> Publication Notes</h2>
      <p>
        This document is an <strong>AI-generated research compilation</strong> intended as a directional guide for brainstorming and inspiration. While extensively fact-checked using multiple AI systems and cross-referenced with official sources (DGEEC, INE, Eurostat, ANACOM ...), it should not substitute professional advisory services or serve as a basis for decision making.
      </p>
     
    </section>

    <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
         ║  ARCHIVE TOGGLE                                                          ║
         ╚═══════════════════════════════════════════════════════════════════════════╝ -->
    <div class="archive-toggle">
      <button type="button" id="archive-toggle-btn" class="btn-archive-toggle" aria-expanded="false" aria-controls="verification-archive">
        <i class="fa-solid fa-robot"></i> Semi-Automated AI Fact-Checks
        <i class="fa-solid fa-chevron-down"></i>
      </button>
    </div>

  </main>

  <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
       ║  VERIFICATION ARCHIVE (Hidden by Default)                               ║
       ╚═══════════════════════════════════════════════════════════════════════════╝ -->
  <div id="verification-archive" class="verification-archive" hidden>
    <div class="container">
      <h3><i class="fa-solid fa-robot"></i> Semi-Automated AI Fact-Checks</h3>
      <p class="section-intro">This guide uses a semi-automated verification system.</p>

      <!-- Fact-Check System Description -->
      <div class="factcheck-system-info">
        <h4><i class="fa-solid fa-shield-halved"></i> How Verification Works</h4>
        <div class="system-info-grid">
          <div class="system-info-card">
            <h5><i class="fa-solid fa-database"></i> Source Registry</h5>
            <p>Claims are generated dynamically from live source databases (MASTER, CITY_PROFILES, WEBSITE_CONTENT, COMPENSATION_DATA) with source-free prompt text for independent verification.</p>
            <p>Source metadata and links are maintained centrally in the source archive and normalized data files.</p>
          </div>
          <div class="system-info-card">
            <h5><i class="fa-solid fa-arrows-spin"></i> Iteration Workflow</h5>
            <p>Run the same generated prompt across 5-6 engines and collect JSONL output per claim, then build a consensus matrix before proposing corrections.</p>
            <p><strong>HITL gate:</strong> no database values are updated automatically. Changes are applied only after explicit human approval (“GO”).</p>
            <p><strong>Exit criteria:</strong> no contradicted claims in approved updates and consensus-backed actions logged in the verification archive.</p>
          </div>
          <div class="system-info-card">
            <h5><i class="fa-solid fa-chart-line"></i> Scoring Rubric</h5>
            <ul>
              <li><strong>SUPPORTED:</strong> Evidence supports the claim within practical tolerance</li>
              <li><strong>PARTIALLY_SUPPORTED:</strong> Directionally correct with material variance</li>
              <li><strong>CONTRADICTED:</strong> Independent evidence materially disagrees</li>
              <li><strong>UNVERIFIABLE / OUTDATED:</strong> No defensible basis or stale evidence window</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Fact-Check Prompt Generator Experimental v3 -->
      <div class="factcheck-prompt-section" id="factcheck-generator">
        <h4><i class="fa-solid fa-wand-magic-sparkles"></i> Fact-Check Prompt Generator <span class="badge badge-sm badge-factcheck">Experimental v3</span></h4>
        
        <p class="factcheck-generator-intro">Select a data category or city profile to generate a verification prompt. Claims are generated dynamically from the live databases and must be checked with independently discovered evidence.</p>
        
        <!-- Data Categories Section -->
        <h5 class="factcheck-section-title"><i class="fa-solid fa-database"></i> Data Categories</h5>
        <div class="factcheck-categories">
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="macroeconomic">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">01</span>
                <span class="factcheck-category-label">Macroeconomic</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="85">85%</span>
                <span class="factcheck-category-claims" data-claims-category="macroeconomic">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="digitalInfra">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">02</span>
                <span class="factcheck-category-label">Digital Infrastructure</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="90">90%</span>
                <span class="factcheck-category-claims" data-claims-category="digitalInfra">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="officeRent">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">03</span>
                <span class="factcheck-category-label">Office Rent</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="82">82%</span>
                <span class="factcheck-category-claims" data-claims-category="officeRent">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="residentialRent">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">04</span>
                <span class="factcheck-category-label">Residential Rent</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="75">75%</span>
                <span class="factcheck-category-claims" data-claims-category="residentialRent">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="workforce">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">05</span>
                <span class="factcheck-category-label">Workforce Talent</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="85">85%</span>
                <span class="factcheck-category-claims" data-claims-category="workforce">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="taxIncentives">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">06</span>
                <span class="factcheck-category-label">Strategic & Tax</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="88">88%</span>
                <span class="factcheck-category-claims" data-claims-category="taxIncentives">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category">
            <input type="radio" name="factcheck-category" value="graduates">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">07</span>
                <span class="factcheck-category-label">University Talent</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="78">78%</span>
                <span class="factcheck-category-claims" data-claims-category="graduates">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-category-highlight">
            <input type="radio" name="factcheck-category" value="cityDatabase">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id"><i class="fa-solid fa-database"></i></span>
                <span class="factcheck-category-label">City Database (All Metrics)</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="80">80%</span>
                <span class="factcheck-category-claims" data-claims-category="cityDatabase">--</span>
              </div>
            </div>
          </label>
        </div>

        <!-- City Profiles Section -->
        <h5 class="factcheck-section-title"><i class="fa-solid fa-city"></i> City Profiles</h5>
        <div class="factcheck-categories factcheck-cities">
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:lisbon">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C1</span>
                <span class="factcheck-category-label">Lisbon</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="88">88%</span>
                <span class="factcheck-category-claims" data-claims-category="city:lisbon">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:porto">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C2</span>
                <span class="factcheck-category-label">Porto</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="90">90%</span>
                <span class="factcheck-category-claims" data-claims-category="city:porto">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:braga">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C3</span>
                <span class="factcheck-category-label">Braga</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="88">88%</span>
                <span class="factcheck-category-claims" data-claims-category="city:braga">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:guimaraes">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C4</span>
                <span class="factcheck-category-label">Guimarães</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="85">85%</span>
                <span class="factcheck-category-claims" data-claims-category="city:guimaraes">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:coimbra">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C5</span>
                <span class="factcheck-category-label">Coimbra</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="87">87%</span>
                <span class="factcheck-category-claims" data-claims-category="city:coimbra">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:aveiro">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C6</span>
                <span class="factcheck-category-label">Aveiro</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="86">86%</span>
                <span class="factcheck-category-claims" data-claims-category="city:aveiro">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:covilha">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C7</span>
                <span class="factcheck-category-label">Covilhã</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="88">88%</span>
                <span class="factcheck-category-claims" data-claims-category="city:covilha">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:evora">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C8</span>
                <span class="factcheck-category-label">Évora</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="81">81%</span>
                <span class="factcheck-category-claims" data-claims-category="city:evora">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:faro">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C9</span>
                <span class="factcheck-category-label">Faro</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="83">83%</span>
                <span class="factcheck-category-claims" data-claims-category="city:faro">--</span>
              </div>
            </div>
          </label>
          <label class="factcheck-category factcheck-city">
            <input type="radio" name="factcheck-category" value="city:setubal">
            <div class="factcheck-category-content">
              <div class="factcheck-category-header">
                <span class="factcheck-category-id">C10</span>
                <span class="factcheck-category-label">Setúbal</span>
              </div>
              <div class="factcheck-category-footer">
                <span class="factcheck-category-score" data-score="82">82%</span>
                <span class="factcheck-category-claims" data-claims-category="city:setubal">--</span>
              </div>
            </div>
          </label>
        </div>

     

        <div class="factcheck-actions">
          <button type="button" id="generate-factcheck-btn" class="btn-generate-factcheck">
            <i class="fa-solid fa-clipboard-check" aria-hidden="true"></i>
            <span>Generate Fact-Check Prompt</span>
          </button>
        </div>
        
        <div class="prompt-output-container" id="factcheck-output-container">
          <div class="prompt-output-header">
            <span class="prompt-output-badge badge-factcheck">FACT-CHECK PROMPT</span>
            <button type="button" class="btn-copy-prompt" id="btn-copy-factcheck" title="Copy prompt" disabled>
              <i class="fa-solid fa-copy"></i> Copy
            </button>
          </div>
          <pre class="prompt-output-text" id="factcheck-prompt-text">Select a category above and click "Generate Fact-Check Prompt" to create a verification prompt.</pre>
        </div>
        <p class="prompt-output-note"><i class="fa-solid fa-circle-info"></i> Paste into Claude, GPT-5, or DeepSeek R1 for verification. Output is JSONL format.</p>
      </div>

      <!-- Section Scores -->
      <div class="archive-section">
        <h4><i class="fa-solid fa-layer-group"></i> Section Scores</h4>
        <div id="section-score-cards" class="score-cards-grid" data-db="content">
          <!-- Dynamically rendered from WEBSITE_CONTENT.json sectionScores -->
        </div>
      </div>

      <!-- City Scores -->
      <div class="archive-section">
        <h4><i class="fa-solid fa-city"></i> City Profile Scores</h4>
        <div id="fact-check-cards" class="score-cards-grid" data-db="profiles">
          <!-- Dynamically rendered from CITY_PROFILES.json checkScore data -->
        </div>
      </div>

    </div>
  </div>

  <!-- ╔═══════════════════════════════════════════════════════════════════════════╗
       ║  FOOTER                                                                  ║
       ╚═══════════════════════════════════════════════════════════════════════════╝ -->
  <footer class="site-footer">
    <div class="container">
      <p>
        <strong>IT Nearshoring in Portugal</strong> — A data-driven city analysis &amp; AI simulator
      </p>
      <p>
        <a href="https://github.com/al-gharb/nearshoring-cities-portugal" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-github"></i> Source on GitHub</a>
        &nbsp;·&nbsp;
        <a href="https://al-gharb.github.io/nearshoring-cities-portugal/" target="_blank" rel="noopener noreferrer"><i class="fa-solid fa-globe"></i> Live Site</a>
      </p>
      <p class="footer-credits">Built with AI · <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-creative-commons"></i> <i class="fa-brands fa-creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc"></i> <i class="fa-brands fa-creative-commons-sa"></i> CC BY-NC-SA 4.0</a></p>
      <p class="footer-image-notice">Wikipedia-sourced images keep their respective licenses; follow each photo's credit link for the exact terms.</p>
    </div>
  </footer>

  <!-- Floating Navigation Buttons -->
  <a href="#cover" class="back-to-map" id="backToMap" aria-label="Back to map">
    <i class="fa-solid fa-map" aria-hidden="true"></i>
  </a>
  <a href="#index" class="back-to-index" id="backToIndex" aria-label="Back to index">
    <i class="fa-solid fa-list" aria-hidden="true"></i>
  </a>

  <!-- Database Source Legend (Debug Mode) -->
  <div class="db-source-legend" id="dbSourceLegend">
    <div class="db-source-legend-title">
      <i class="fa-solid fa-database"></i> Database Sources
      <button onclick="document.body.classList.remove('debug-db-sources')" style="float:right;background:none;border:none;cursor:pointer;color:var(--light-text);">&times;</button>
    </div>
    <div class="db-source-legend-item">
      <span class="db-source-legend-swatch master"></span>
      <span>MASTER.json (cities, graduates, costs)</span>
    </div>
    <div class="db-source-legend-item">
      <span class="db-source-legend-swatch profiles"></span>
      <span>CITY_PROFILES.json (domains, verification)</span>
    </div>
    <div class="db-source-legend-item">
      <span class="db-source-legend-swatch content"></span>
      <span>WEBSITE_CONTENT.json (national, sections)</span>
    </div>
    <div class="db-source-legend-item">
      <span class="db-source-legend-swatch compensation"></span>
      <span>COMPENSATION_DATA.json (salaries)</span>
    </div>
    <div class="db-source-legend-item">
      <span class="db-source-legend-swatch" style="background:none;border:2px dashed #ef4444;"></span>
      <span>Prompt-core (feeds into fact-check)</span>
    </div>
    <div style="margin-top:0.5rem;font-size:0.65rem;color:var(--light-text);">
      Press <kbd style="background:#334155;padding:0.1rem 0.3rem;border-radius:3px;">Ctrl+Shift+D</kbd> to toggle
    </div>
  </div>

  <!-- Debug Mode Toggle Button (always visible in dev) -->
  <button class="db-debug-toggle" id="dbDebugToggle" title="Toggle Database Source Highlighting">
    <i class="fa-solid fa-highlighter"></i>
  </button>

  <!-- App Entry Point (Vite handles module bundling) -->
  <script type="module" src="./scripts/main.js"></script>
</body>
</html>
